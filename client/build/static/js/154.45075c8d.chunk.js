"use strict";(self.webpackChunkfintools_client=self.webpackChunkfintools_client||[]).push([[154],{87154:(e,r,s)=>{s.r(r),s.d(r,{default:()=>re});var i=s(65043),t=s(96446),o=s(14194),n=s(11906),l=s(81637),a=s(85865),d=s(68903),c=s(12110),x=s(26494),h=s(39336),u=s(10611),g=s(43845),b=s(67784),A=s(51787),p=s(53193),j=s(79190),m=s(69285),y=s(32143),f=s(81045),v=s(77739),C=s(17392),k=s(24010),P=s(83462),S=s(4219),w=s(35316),W=s(74605),I=s(4598),R=s(29347),F=s(69974),D=s(42715),M=s(74021),E=s(70141),N=s(68970),z=s(67957),O=s(79484),V=s(69131),$=s(99010),q=s(83560),L=s(85812),B=s(51387),T=s(21997),_=s(33438),U=s(64668),Q=s(8729),Y=s(28393),G=s(58390),H=s(43278),J=s(39993),K=s(26240),X=s(30344),Z=s(70579);const ee=["Phone","Accessories","Other"];function re(){var e,r,s,re;const{products:se,loadProducts:ie,productsLoading:te,productsLoaded:oe,addProduct:ne,updateProduct:le,deleteProduct:ae,markProductAsSold:de,loading:ce,error:xe,loadFinancialSummary:he,loadRevenues:ue}=(0,i.useContext)(U.r),{}=(0,i.useContext)(Q.c),[ge,be]=(0,i.useState)(!1),[Ae,pe]=(0,i.useState)(!1),[je,me]=(0,i.useState)("add"),[ye,fe]=(0,i.useState)(null),[ve,Ce]=(0,i.useState)(!1),[ke,Pe]=(0,i.useState)(!1),[Se,we]=(0,i.useState)({name:"",description:"",category:"Phone",purchasePrice:"",sellingPrice:"",quantity:1,purchaseDate:new Date,supplier:"",serialNumber:"",isAsset:!0,assetValue:"",notes:""}),[We,Ie]=(0,i.useState)({sellingPrice:"",soldDate:new Date,notes:""}),[Re,Fe]=(0,i.useState)(0),[De,Me]=(0,i.useState)(10),[Ee,Ne]=(0,i.useState)(""),[ze,Oe]=(0,i.useState)(""),[Ve,$e]=(0,i.useState)("all"),[qe,Le]=(0,i.useState)(null),[Be,Te]=(0,i.useState)(!1),_e=(0,K.A)(),Ue=(0,X.A)(_e.breakpoints.down("sm")),Qe=async()=>{try{await ie(),await he()}catch(e){console.error("Error refreshing data:",e)}};(0,i.useEffect)((()=>{(async()=>{if(!oe&&!te)try{await ie()}catch(e){console.error("Failed to load products:",e)}})()}),[ie,oe,te]);const Ye=e=>e||0===e?new Intl.NumberFormat("en-MY",{style:"currency",currency:"MYR",minimumFractionDigits:2}).format(e):"-",Ge=e=>{if(!e)return"-";const r=new Date(e);return(0,J.A)(r,"dd MMM yyyy")},He=e=>{switch(e){case"Phone":return(0,Z.jsx)(F.A,{});case"Accessories":return(0,Z.jsx)(D.A,{});default:return(0,Z.jsx)(M.A,{})}},Je=e=>({Phone:"#007AFF",Accessories:"#FF9500",Other:"#8E8E93"}[e]||"#8E8E93"),Ke=(se.length,se.filter((e=>e.inStock)).length),Xe=se.filter((e=>!e.inStock)).length,Ze=se.filter((e=>e.inStock)).reduce(((e,r)=>e+(r.assetValue||r.purchasePrice)),0),er=se.filter((e=>e.inStock&&e.sellingPrice)).reduce(((e,r)=>e+(r.sellingPrice-r.purchasePrice)*r.quantity),0),rr={};ee.forEach((e=>{const r=se.filter((r=>r.category===e&&r.inStock)),s=r.length,i=r.reduce(((e,r)=>e+(r.assetValue||r.purchasePrice)),0);rr[e]={count:s,value:i}}));const sr=()=>{me("add"),we({name:"",description:"",category:"Phone",purchasePrice:"",sellingPrice:"",quantity:1,purchaseDate:new Date,supplier:"",serialNumber:"",isAsset:!0,assetValue:"",notes:""}),be(!0)},ir=e=>{me("edit"),fe(e),we({name:e.name,description:e.description||"",category:e.category,purchasePrice:e.purchasePrice,sellingPrice:e.sellingPrice||"",quantity:e.quantity,purchaseDate:new Date(e.purchaseDate),supplier:e.supplier||"",serialNumber:e.serialNumber||"",isAsset:Boolean(e.assetValue),assetValue:e.assetValue||"",notes:e.notes||""}),be(!0)},tr=e=>{fe(e),Ie({sellingPrice:e.sellingPrice||e.purchasePrice,soldDate:new Date,notes:e.notes||""}),pe(!0)},or=()=>{be(!1),pe(!1),Ce(!1),Pe(!1)},nr=e=>{const{name:r,value:s}=e.target;we({...Se,[r]:s})},lr=e=>{const{name:r,value:s}=e.target;Ie({...We,[r]:s})},ar=se.filter((e=>{const r=e.name&&e.name.toLowerCase().includes(Ee.toLowerCase())||e.description&&e.description.toLowerCase().includes(Ee.toLowerCase())||e.supplier&&e.supplier.toLowerCase().includes(Ee.toLowerCase())||e.serialNumber&&e.serialNumber.toLowerCase().includes(Ee.toLowerCase()),s=!ze||e.category===ze,i=!Ve||"all"===Ve&&!0||"inStock"===Ve&&e.inStock||"sold"===Ve&&!e.inStock;return r&&s&&i})),dr=ar.slice(Re*De,Re*De+De);return qe?(0,Z.jsx)(t.A,{sx:{p:3},children:(0,Z.jsx)(o.A,{severity:"error",action:(0,Z.jsx)(n.A,{color:"inherit",size:"small",onClick:()=>ie(),children:"Retry"}),children:qe})}):te?(0,Z.jsxs)(t.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"80vh"},children:[(0,Z.jsx)(l.A,{size:60,thickness:4,sx:{mb:2}}),(0,Z.jsx)(a.A,{variant:"h6",color:"text.secondary",children:"Loading Products Data..."})]}):(0,Z.jsxs)(t.A,{sx:{p:Ue?1:3},children:[(0,Z.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,px:Ue?1:0},children:[(0,Z.jsx)(a.A,{variant:Ue?"h5":"h4",component:"h1",sx:{fontWeight:700,fontSize:Ue?"1.5rem":"2.125rem",background:"linear-gradient(45deg, #FF9500, #FF2D55)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Products"}),!Ue&&(0,Z.jsx)(n.A,{variant:"contained",color:"primary",startIcon:(0,Z.jsx)(E.A,{}),onClick:sr,sx:{borderRadius:3,px:3,py:1,boxShadow:"0 4px 10px rgba(0, 122, 255, 0.3)",fontWeight:600},children:"Add Product"})]}),(0,Z.jsxs)(d.Ay,{container:!0,spacing:Ue?2:3,sx:{mb:3},children:[(0,Z.jsx)(d.Ay,{item:!0,xs:12,md:6,lg:3,children:(0,Z.jsx)(c.A,{elevation:0,className:"ios-shadow",sx:{borderRadius:4,height:"100%",overflow:"hidden",background:"linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,1) 100%)",backdropFilter:"blur(20px)"},children:(0,Z.jsxs)(x.A,{children:[(0,Z.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,Z.jsx)(t.A,{sx:{width:50,height:50,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",mr:2,background:"linear-gradient(45deg, #007AFF, #007AFFCC)",boxShadow:"0 4px 10px rgba(0, 122, 255, 0.2)"},children:(0,Z.jsx)(N.A,{sx:{color:"white",fontSize:28}})}),(0,Z.jsxs)(t.A,{children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Total Inventory Value"}),(0,Z.jsx)(a.A,{variant:"h5",component:"div",sx:{fontWeight:700},children:Ye(Ze)})]})]}),(0,Z.jsx)(h.A,{sx:{my:2}}),(0,Z.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,Z.jsxs)(d.Ay,{item:!0,xs:6,children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"In Stock"}),(0,Z.jsxs)(a.A,{variant:"h6",sx:{fontWeight:600},children:[Ke," items"]})]}),(0,Z.jsxs)(d.Ay,{item:!0,xs:6,children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Sold"}),(0,Z.jsxs)(a.A,{variant:"h6",sx:{fontWeight:600},children:[Xe," items"]})]})]})]})})}),(0,Z.jsx)(d.Ay,{item:!0,xs:12,md:6,lg:3,children:(0,Z.jsx)(c.A,{elevation:0,className:"ios-shadow",sx:{borderRadius:4,height:"100%",overflow:"hidden",background:"linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,1) 100%)",backdropFilter:"blur(20px)"},children:(0,Z.jsxs)(x.A,{children:[(0,Z.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,Z.jsx)(t.A,{sx:{width:50,height:50,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",mr:2,background:"linear-gradient(45deg, #34C759, #34C759CC)",boxShadow:"0 4px 10px rgba(52, 199, 89, 0.2)"},children:(0,Z.jsx)(z.A,{sx:{color:"white",fontSize:28}})}),(0,Z.jsxs)(t.A,{children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Potential Profit"}),(0,Z.jsx)(a.A,{variant:"h5",component:"div",sx:{fontWeight:700},children:Ye(er)})]})]}),(0,Z.jsx)(h.A,{sx:{my:2}}),(0,Z.jsx)(d.Ay,{container:!0,spacing:2,children:(0,Z.jsxs)(d.Ay,{item:!0,xs:12,children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Profit Margin"}),(0,Z.jsx)(u.A,{variant:"determinate",value:Ze>0?er/Ze*100:0,sx:{height:8,borderRadius:4,backgroundColor:"rgba(0,0,0,0.04)","& .MuiLinearProgress-bar":{backgroundColor:"#34C759"}}}),(0,Z.jsx)(a.A,{variant:"body2",sx:{mt:1,fontWeight:500},children:Ze>0?`${(er/Ze*100).toFixed(1)}%`:"0%"})]})})]})})}),(0,Z.jsx)(d.Ay,{item:!0,xs:12,sm:6,lg:3,children:(0,Z.jsx)(c.A,{elevation:0,className:"ios-shadow",sx:{borderRadius:4,height:"100%",overflow:"hidden",background:"linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,1) 100%)",backdropFilter:"blur(20px)"},children:(0,Z.jsxs)(x.A,{children:[(0,Z.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,Z.jsx)(t.A,{sx:{width:50,height:50,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",mr:2,background:"linear-gradient(45deg, #FF9500, #FF9500CC)",boxShadow:"0 4px 10px rgba(255, 149, 0, 0.2)"},children:(0,Z.jsx)(F.A,{sx:{color:"white",fontSize:28}})}),(0,Z.jsxs)(t.A,{children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Phones"}),(0,Z.jsx)(a.A,{variant:"h5",component:"div",sx:{fontWeight:700},children:(null===(e=rr.Phone)||void 0===e?void 0:e.count)||0})]})]}),(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Total Value"}),(0,Z.jsx)(a.A,{variant:"body1",sx:{fontWeight:600},children:Ye((null===(r=rr.Phone)||void 0===r?void 0:r.value)||0)}),(0,Z.jsx)(t.A,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},children:(0,Z.jsx)(g.A,{label:"View Phones",size:"small",onClick:()=>Oe("Phone"),sx:{fontWeight:500,borderRadius:3,bgcolor:"rgba(255, 149, 0, 0.1)",color:"#FF9500"}})})]})})}),(0,Z.jsx)(d.Ay,{item:!0,xs:12,sm:6,lg:3,children:(0,Z.jsx)(c.A,{elevation:0,className:"ios-shadow",sx:{borderRadius:4,height:"100%",overflow:"hidden",background:"linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,1) 100%)",backdropFilter:"blur(20px)"},children:(0,Z.jsxs)(x.A,{children:[(0,Z.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,Z.jsx)(t.A,{sx:{width:50,height:50,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",mr:2,background:"linear-gradient(45deg, #5856D6, #5856D6CC)",boxShadow:"0 4px 10px rgba(88, 86, 214, 0.2)"},children:(0,Z.jsx)(D.A,{sx:{color:"white",fontSize:28}})}),(0,Z.jsxs)(t.A,{children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Accessories"}),(0,Z.jsx)(a.A,{variant:"h5",component:"div",sx:{fontWeight:700},children:(null===(s=rr.Accessories)||void 0===s?void 0:s.count)||0})]})]}),(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Total Value"}),(0,Z.jsx)(a.A,{variant:"body1",sx:{fontWeight:600},children:Ye((null===(re=rr.Accessories)||void 0===re?void 0:re.value)||0)}),(0,Z.jsx)(t.A,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},children:(0,Z.jsx)(g.A,{label:"View Accessories",size:"small",onClick:()=>Oe("Accessories"),sx:{fontWeight:500,borderRadius:3,bgcolor:"rgba(88, 86, 214, 0.1)",color:"#5856D6"}})})]})})})]}),(0,Z.jsxs)(t.A,{sx:{mb:3,display:"flex",flexDirection:Ue?"column":"row",gap:2,alignItems:Ue?"stretch":"center",px:Ue?1:0},children:[(0,Z.jsx)(b.A,{placeholder:"Search products...",value:Ee,onChange:e=>Ne(e.target.value),variant:"outlined",fullWidth:Ue,sx:{flex:1,"& .MuiOutlinedInput-root":{borderRadius:3,backgroundColor:"rgba(0,0,0,0.02)"}},InputProps:{startAdornment:(0,Z.jsx)(A.A,{position:"start",children:(0,Z.jsx)(O.A,{sx:{color:"text.secondary"}})})}}),(0,Z.jsxs)(t.A,{sx:{display:"flex",gap:2},children:[(0,Z.jsxs)(p.A,{sx:{minWidth:140},children:[(0,Z.jsx)(j.A,{id:"category-filter-label",children:"Category"}),(0,Z.jsxs)(m.A,{labelId:"category-filter-label",id:"category-filter",value:ze,onChange:e=>Oe(e.target.value),label:"Category",sx:{borderRadius:3,backgroundColor:"rgba(0,0,0,0.02)"},children:[(0,Z.jsx)(y.A,{value:"",children:"All"}),ee.map((e=>(0,Z.jsx)(y.A,{value:e,children:e},e)))]})]}),(0,Z.jsxs)(p.A,{sx:{minWidth:140},children:[(0,Z.jsx)(j.A,{id:"status-filter-label",children:"Status"}),(0,Z.jsxs)(m.A,{labelId:"status-filter-label",id:"status-filter",value:Ve,onChange:e=>$e(e.target.value),label:"Status",sx:{borderRadius:3,backgroundColor:"rgba(0,0,0,0.02)"},children:[(0,Z.jsx)(y.A,{value:"all",children:"All"}),(0,Z.jsx)(y.A,{value:"inStock",children:"In Stock"}),(0,Z.jsx)(y.A,{value:"sold",children:"Sold"})]})]})]})]}),te?(0,Z.jsx)(t.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:(0,Z.jsx)(l.A,{})}):(0,Z.jsx)(Z.Fragment,{children:dr.length>0?(0,Z.jsx)(d.Ay,{container:!0,spacing:Ue?2:3,children:dr.map((e=>(0,Z.jsx)(d.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,Z.jsxs)(c.A,{elevation:0,className:"ios-shadow",sx:{borderRadius:4,overflow:"hidden",position:"relative",height:"100%","&:hover":{"& .product-actions":{opacity:1}}},children:[(0,Z.jsx)(t.A,{sx:{height:8,width:"100%",backgroundColor:e.inStock?Je(e.category):"#8E8E93"}}),(0,Z.jsxs)(x.A,{children:[!e.inStock&&(0,Z.jsx)(g.A,{label:"Sold",size:"small",color:"default",sx:{position:"absolute",top:12,right:12,fontWeight:500,backgroundColor:"rgba(142, 142, 147, 0.2)"}}),(0,Z.jsxs)(t.A,{sx:{display:"flex",alignItems:"flex-start",mb:2},children:[(0,Z.jsx)(f.A,{sx:{width:40,height:40,bgcolor:`${Je(e.category)}20`,color:e.inStock?Je(e.category):"#8E8E93",mr:1.5},children:He(e.category)}),(0,Z.jsxs)(t.A,{sx:{flex:1},children:[(0,Z.jsx)(a.A,{variant:"h6",component:"div",sx:{fontWeight:600,color:e.inStock?"text.primary":"text.secondary"},children:e.name}),(0,Z.jsxs)(a.A,{variant:"body2",color:"text.secondary",children:[e.category," \u2022 ID: ",e.serialNumber||"-"]})]})]}),(0,Z.jsxs)(d.Ay,{container:!0,spacing:1,sx:{mb:1},children:[(0,Z.jsxs)(d.Ay,{item:!0,xs:6,children:[(0,Z.jsx)(a.A,{variant:"caption",color:"text.secondary",display:"block",children:"Purchase Price"}),(0,Z.jsx)(a.A,{variant:"body1",sx:{fontWeight:500},children:Ye(e.purchasePrice)})]}),(0,Z.jsxs)(d.Ay,{item:!0,xs:6,children:[(0,Z.jsx)(a.A,{variant:"caption",color:"text.secondary",display:"block",children:e.inStock?"Selling Price":"Sold For"}),(0,Z.jsx)(a.A,{variant:"body1",sx:{fontWeight:600,color:e.inStock&&e.sellingPrice?"secondary.main":"text.primary"},children:Ye(e.inStock?e.sellingPrice:e.soldPrice)})]})]}),(0,Z.jsx)(h.A,{sx:{my:1.5}}),(0,Z.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[(0,Z.jsxs)(t.A,{sx:{display:"flex",alignItems:"center"},children:[(0,Z.jsx)(V.A,{fontSize:"small",sx:{mr:.5,color:"text.secondary",fontSize:"0.875rem",opacity:.7}}),(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:Ge(e.inStock?e.purchaseDate:e.soldDate)})]}),e.quantity>1&&(0,Z.jsxs)(a.A,{variant:"body2",sx:{fontWeight:500},children:["Qty: ",e.quantity]})]}),(0,Z.jsxs)(t.A,{className:"product-actions",sx:{mt:2,display:"flex",justifyContent:"flex-end",opacity:{xs:1,sm:0},transition:"opacity 0.2s",gap:1},children:[e.inStock?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(v.A,{title:"Mark as Sold",children:(0,Z.jsx)(C.A,{size:"small",onClick:()=>tr(e),sx:{backgroundColor:"rgba(52, 199, 89, 0.1)",color:"#34C759","&:hover":{backgroundColor:"rgba(52, 199, 89, 0.2)"}},children:(0,Z.jsx)($.A,{fontSize:"small"})})}),(0,Z.jsx)(v.A,{title:"Edit",children:(0,Z.jsx)(C.A,{size:"small",onClick:()=>ir(e),sx:{backgroundColor:"rgba(0, 122, 255, 0.1)",color:"#007AFF","&:hover":{backgroundColor:"rgba(0, 122, 255, 0.2)"}},children:(0,Z.jsx)(q.A,{fontSize:"small"})})})]}):(0,Z.jsx)(v.A,{title:"View Details",children:(0,Z.jsx)(C.A,{size:"small",onClick:()=>(e=>{fe(e),Ce(!0)})(e),sx:{backgroundColor:"rgba(142, 142, 147, 0.1)",color:"#8E8E93","&:hover":{backgroundColor:"rgba(142, 142, 147, 0.2)"}},children:(0,Z.jsx)(L.A,{fontSize:"small"})})}),(0,Z.jsx)(v.A,{title:"Delete",children:(0,Z.jsx)(C.A,{size:"small",onClick:()=>(e=>{fe(e),Pe(!0)})(e),sx:{backgroundColor:"rgba(255, 59, 48, 0.1)",color:"#FF3B30","&:hover":{backgroundColor:"rgba(255, 59, 48, 0.2)"}},children:(0,Z.jsx)(B.A,{fontSize:"small"})})})]})]})]})},e._id)))}):(0,Z.jsxs)(t.A,{sx:{p:3,textAlign:"center",borderRadius:4,backgroundColor:"rgba(0,0,0,0.02)",mt:4},children:[(0,Z.jsx)(T.A,{sx:{fontSize:48,color:"text.secondary",opacity:.5,mb:2}}),(0,Z.jsx)(a.A,{variant:"h6",color:"text.secondary",children:"No products found"}),(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",sx:{mt:1},children:Ee||ze||"all"!==Ve?"Try adjusting your search or filters":"Add your first product to get started"}),(Ee||ze||"all"!==Ve)&&(0,Z.jsx)(n.A,{variant:"outlined",color:"primary",onClick:()=>{Ne(""),Oe(""),$e("all")},sx:{mt:2,borderRadius:3},children:"Clear Filters"})]})}),dr.length>0&&(0,Z.jsxs)(t.A,{sx:{display:"flex",justifyContent:"center",mt:4,mb:2},children:[(0,Z.jsx)(n.A,{disabled:0===Re,onClick:()=>Fe(Re-1),sx:{borderRadius:3,mr:1},children:"Previous"}),(0,Z.jsxs)(a.A,{variant:"body1",sx:{mx:2,display:"flex",alignItems:"center"},children:["Page ",Re+1," of ",Math.ceil(ar.length/De)]}),(0,Z.jsx)(n.A,{disabled:Re>=Math.ceil(ar.length/De)-1,onClick:()=>Fe(Re+1),sx:{borderRadius:3,ml:1},children:"Next"})]}),Ue&&(0,Z.jsx)(k.A,{color:"primary","aria-label":"add",onClick:sr,sx:{position:"fixed",bottom:80,right:16,boxShadow:"0 4px 14px rgba(0, 122, 255, 0.5)"},children:(0,Z.jsx)(E.A,{})}),(0,Z.jsxs)(P.A,{open:ge,onClose:()=>{ce||(or(),Le(null))},maxWidth:"md",fullWidth:!0,fullScreen:Ue,PaperProps:{sx:{borderRadius:Ue?0:4,overflow:"hidden"}},children:[(0,Z.jsx)(S.A,{sx:{backgroundColor:"rgba(0,0,0,0.02)",borderBottom:"1px solid rgba(0,0,0,0.05)",py:2,px:3},children:(0,Z.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,Z.jsx)(a.A,{variant:"h6",sx:{fontWeight:600},children:"add"===je?"Add New Product":"Edit Product"}),(0,Z.jsx)(C.A,{edge:"end",onClick:()=>{ce||(or(),Le(null))},disabled:ce,sx:{bgcolor:"rgba(0,0,0,0.05)","&:hover":{bgcolor:"rgba(0,0,0,0.1)"}},children:(0,Z.jsx)(_.A,{})})]})}),(0,Z.jsxs)(w.A,{sx:{pt:2},children:[qe&&(0,Z.jsx)(o.A,{severity:"error",sx:{mb:2,borderRadius:2},children:qe}),(0,Z.jsx)(t.A,{component:"form",noValidate:!0,sx:{mt:1},children:(0,Z.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,Z.jsx)(d.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(b.A,{required:!0,fullWidth:!0,label:"Product Name",name:"name",value:Se.name,onChange:nr,sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}})}),(0,Z.jsx)(d.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsxs)(p.A,{fullWidth:!0,required:!0,children:[(0,Z.jsx)(j.A,{children:"Category"}),(0,Z.jsx)(m.A,{name:"category",value:Se.category,onChange:nr,label:"Category",sx:{"& .MuiOutlinedInput-root":{borderRadius:3}},children:ee.map((e=>(0,Z.jsx)(y.A,{value:e,children:(0,Z.jsxs)(t.A,{sx:{display:"flex",alignItems:"center"},children:[(0,Z.jsx)(t.A,{sx:{display:"flex",mr:1,color:Je(e)},children:He(e)}),e]})},e)))})]})}),(0,Z.jsx)(d.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(b.A,{required:!0,fullWidth:!0,label:"Purchase Price",name:"purchasePrice",type:"number",value:Se.purchasePrice,onChange:nr,InputProps:{startAdornment:(0,Z.jsx)(A.A,{position:"start",children:"RM"})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}})}),(0,Z.jsx)(d.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(b.A,{fullWidth:!0,label:"Expected Selling Price",name:"sellingPrice",type:"number",value:Se.sellingPrice,onChange:nr,InputProps:{startAdornment:(0,Z.jsx)(A.A,{position:"start",children:"RM"})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}})}),(0,Z.jsx)(d.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(b.A,{required:!0,fullWidth:!0,label:"Quantity",name:"quantity",type:"number",value:Se.quantity,onChange:nr,InputProps:{inputProps:{min:1}},sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}})}),(0,Z.jsx)(d.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(G.$,{dateAdapter:Y.h,children:(0,Z.jsx)(H.l,{label:"Purchase Date",value:Se.purchaseDate,onChange:e=>we({...Se,purchaseDate:e}),renderInput:e=>(0,Z.jsx)(b.A,{...e,fullWidth:!0,required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}})})})}),(0,Z.jsx)(d.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(b.A,{fullWidth:!0,label:"Supplier/Vendor",name:"supplier",value:Se.supplier,onChange:nr,sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}})}),(0,Z.jsx)(d.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(b.A,{fullWidth:!0,label:"Serial Number",name:"serialNumber",value:Se.serialNumber,onChange:nr,sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}})}),(0,Z.jsx)(d.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(W.A,{control:(0,Z.jsx)(I.A,{checked:Se.isAsset,onChange:e=>we({...Se,isAsset:e.target.checked}),name:"isAsset",color:"primary"}),label:"Track as Asset"})}),Se.isAsset&&(0,Z.jsx)(d.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(b.A,{fullWidth:!0,label:"Asset Value",name:"assetValue",type:"number",value:Se.assetValue,onChange:nr,InputProps:{startAdornment:(0,Z.jsx)(A.A,{position:"start",children:"RM"})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}})}),(0,Z.jsx)(d.Ay,{item:!0,xs:12,children:(0,Z.jsx)(b.A,{fullWidth:!0,label:"Description",name:"description",multiline:!0,rows:2,value:Se.description,onChange:nr,sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}})}),(0,Z.jsx)(d.Ay,{item:!0,xs:12,children:(0,Z.jsx)(b.A,{fullWidth:!0,label:"Notes",name:"notes",multiline:!0,rows:2,value:Se.notes,onChange:nr,sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}})})]})})]}),(0,Z.jsxs)(R.A,{sx:{px:3,py:2,backgroundColor:"rgba(0,0,0,0.02)",borderTop:"1px solid rgba(0,0,0,0.05)"},children:[(0,Z.jsx)(n.A,{onClick:or,disabled:ce,sx:{fontWeight:500,borderRadius:3,px:3},children:"Cancel"}),(0,Z.jsx)(n.A,{onClick:async()=>{try{let e;Le(null),"add"===je?(console.log("Adding new product:",Se),e=await ne(Se)):(console.log(`Updating product ${ye._id}:`,Se),e=await le(ye._id,Se)),e?(console.log("Product saved successfully"),or(),await Qe()):(console.error(`Save failed with error in context: ${xe}`),Le(xe||`Failed to ${"add"===je?"add":"update"} product: Unknown error`))}catch(e){console.error("Error saving product:",e),Le(`Failed to ${"add"===je?"add":"update"} product: ${e.message||"Unknown error"}`)}},variant:"contained",color:"primary",disabled:ce,startIcon:ce?(0,Z.jsx)(l.A,{size:16,color:"inherit"}):null,sx:{fontWeight:600,borderRadius:3,px:3,boxShadow:"0 4px 10px rgba(0, 122, 255, 0.3)"},children:ce?"Saving...":"add"===je?"Add Product":"Update Product"})]})]}),(0,Z.jsxs)(P.A,{open:Ae,onClose:()=>{ce||(or(),Le(null))},maxWidth:"sm",fullWidth:!0,fullScreen:Ue,PaperProps:{sx:{borderRadius:Ue?0:4,overflow:"hidden"}},children:[(0,Z.jsx)(S.A,{sx:{backgroundColor:"rgba(0,0,0,0.02)",borderBottom:"1px solid rgba(0,0,0,0.05)",py:2,px:3},children:(0,Z.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,Z.jsx)(a.A,{variant:"h6",sx:{fontWeight:600},children:"Mark Product as Sold"}),(0,Z.jsx)(C.A,{edge:"end",onClick:()=>{ce||(or(),Le(null))},disabled:ce,sx:{bgcolor:"rgba(0,0,0,0.05)","&:hover":{bgcolor:"rgba(0,0,0,0.1)"}},children:(0,Z.jsx)(_.A,{})})]})}),(0,Z.jsxs)(w.A,{sx:{pt:2},children:[qe&&(0,Z.jsx)(o.A,{severity:"error",sx:{mb:2,borderRadius:2},children:qe}),ye&&(0,Z.jsxs)(t.A,{sx:{mt:1},children:[(0,Z.jsx)(c.A,{elevation:0,sx:{mb:3,borderRadius:3,bgcolor:"rgba(0, 122, 255, 0.05)",border:"1px solid rgba(0, 122, 255, 0.1)"},children:(0,Z.jsx)(x.A,{sx:{px:2,py:1.5},children:(0,Z.jsxs)(t.A,{sx:{display:"flex",alignItems:"center"},children:[(0,Z.jsx)(f.A,{sx:{width:36,height:36,bgcolor:`${Je(ye.category)}20`,color:Je(ye.category),mr:1.5},children:He(ye.category)}),(0,Z.jsxs)(t.A,{children:[(0,Z.jsx)(a.A,{variant:"body1",sx:{fontWeight:600},children:ye.name}),(0,Z.jsxs)(a.A,{variant:"body2",color:"text.secondary",children:["Purchase Price: ",Ye(ye.purchasePrice)]})]})]})})}),(0,Z.jsx)(a.A,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"primary.main"},children:"Sale Information"}),(0,Z.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,Z.jsx)(d.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(b.A,{required:!0,fullWidth:!0,label:"Selling Price",name:"sellingPrice",type:"number",value:We.sellingPrice,onChange:lr,InputProps:{startAdornment:(0,Z.jsx)(A.A,{position:"start",children:"RM"})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3},"& .MuiInputLabel-root":{color:"success.main",fontWeight:500},"& .MuiOutlinedInput-notchedOutline":{borderColor:_e.palette.success.main},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:_e.palette.success.dark}}})}),(0,Z.jsx)(d.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(G.$,{dateAdapter:Y.h,children:(0,Z.jsx)(H.l,{label:"Sale Date",value:We.soldDate,onChange:e=>Ie({...We,soldDate:e}),renderInput:e=>(0,Z.jsx)(b.A,{...e,fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}})})})}),(0,Z.jsx)(d.Ay,{item:!0,xs:12,children:(0,Z.jsx)(b.A,{fullWidth:!0,label:"Notes",name:"notes",multiline:!0,rows:2,value:We.notes,onChange:lr,placeholder:"Add any details about this sale (optional)",sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}})}),We.sellingPrice&&(0,Z.jsx)(d.Ay,{item:!0,xs:12,children:(0,Z.jsx)(c.A,{elevation:0,sx:{mt:1,borderRadius:3,bgcolor:"rgba(52, 199, 89, 0.05)",border:"1px solid rgba(52, 199, 89, 0.1)"},children:(0,Z.jsxs)(x.A,{children:[(0,Z.jsx)(a.A,{variant:"subtitle1",sx:{fontWeight:600,color:"#34C759",mb:1},children:"Sale Summary"}),(0,Z.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,Z.jsxs)(d.Ay,{item:!0,xs:6,children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Purchase Price"}),(0,Z.jsx)(a.A,{variant:"body1",children:Ye(ye.purchasePrice)})]}),(0,Z.jsxs)(d.Ay,{item:!0,xs:6,children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Selling Price"}),(0,Z.jsx)(a.A,{variant:"body1",children:Ye(parseFloat(We.sellingPrice)||0)})]})]}),(0,Z.jsx)(h.A,{sx:{my:1.5}}),(0,Z.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,Z.jsxs)(d.Ay,{item:!0,xs:6,children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Profit"}),(0,Z.jsx)(a.A,{variant:"body1",sx:{fontWeight:600,color:(parseFloat(We.sellingPrice)||0)>=ye.purchasePrice?"#34C759":"#FF3B30"},children:Ye((parseFloat(We.sellingPrice)||0)-ye.purchasePrice)})]}),(0,Z.jsxs)(d.Ay,{item:!0,xs:6,children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Profit Margin"}),(0,Z.jsx)(a.A,{variant:"body1",sx:{fontWeight:600,color:(parseFloat(We.sellingPrice)||0)>=ye.purchasePrice?"#34C759":"#FF3B30"},children:ye.purchasePrice>0?`${(((parseFloat(We.sellingPrice)||0)-ye.purchasePrice)/ye.purchasePrice*100).toFixed(1)}%`:"0%"})]})]}),(0,Z.jsx)(h.A,{sx:{my:1.5}}),(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Revenue Entry"}),(0,Z.jsxs)(t.A,{sx:{p:1.5,bgcolor:"background.paper",borderRadius:2,border:"1px dashed rgba(52, 199, 89, 0.3)"},children:[(0,Z.jsxs)(a.A,{variant:"body2",sx:{fontWeight:500},children:["Sale of ",ye.name]}),(0,Z.jsx)(a.A,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"\u2022 Category: Sales"}),(0,Z.jsxs)(a.A,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:["\u2022 Amount: ",Ye(parseFloat(We.sellingPrice)||0)]}),(0,Z.jsxs)(a.A,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:["\u2022 Date: ",(0,J.A)(new Date(We.soldDate),"dd MMM yyyy")]})]})]})})})]})]})]}),(0,Z.jsxs)(R.A,{sx:{px:3,py:2,backgroundColor:"rgba(0,0,0,0.02)",borderTop:"1px solid rgba(0,0,0,0.05)"},children:[(0,Z.jsx)(n.A,{onClick:or,disabled:ce,sx:{fontWeight:500,borderRadius:3,px:3},children:"Cancel"}),(0,Z.jsx)(n.A,{onClick:async()=>{try{Le(null),console.log(`Marking product ${ye._id} as sold:`,We);const e={sellingPrice:parseFloat(We.sellingPrice),soldDate:We.soldDate,notes:We.notes||"",quantity:ye.quantity};console.log("About to call markProductAsSold with data:",e);const r=await de(ye._id,e);console.log("markProductAsSold result:",r),r?(console.log("Product marked as sold successfully"),or(),console.log("Refreshing data after product sale"),await Qe()):(console.error(`Operation failed with error in context: ${xe}`),Le(xe||"Failed to mark product as sold: Unknown error"))}catch(e){console.error("Error marking product as sold:",e),Le(`Failed to mark product as sold: ${e.message||"Unknown error"}`)}},variant:"contained",color:"success",disabled:ce||!We.sellingPrice,startIcon:ce?(0,Z.jsx)(l.A,{size:16,color:"inherit"}):null,sx:{fontWeight:600,borderRadius:3,px:3,bgcolor:"#34C759","&:hover":{bgcolor:"#2EB351"},boxShadow:"0 4px 10px rgba(52, 199, 89, 0.3)"},children:ce?"Processing...":"Complete Sale"})]})]}),(0,Z.jsxs)(P.A,{open:ve,onClose:or,maxWidth:"md",fullWidth:!0,fullScreen:Ue,PaperProps:{sx:{borderRadius:Ue?0:4,overflow:"hidden"}},children:[(0,Z.jsx)(S.A,{sx:{backgroundColor:"rgba(0,0,0,0.02)",borderBottom:"1px solid rgba(0,0,0,0.05)",py:2,px:3},children:(0,Z.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,Z.jsx)(a.A,{variant:"h6",sx:{fontWeight:600},children:"Product Details"}),(0,Z.jsx)(C.A,{edge:"end",onClick:or,sx:{bgcolor:"rgba(0,0,0,0.05)","&:hover":{bgcolor:"rgba(0,0,0,0.1)"}},children:(0,Z.jsx)(_.A,{})})]})}),(0,Z.jsx)(w.A,{sx:{p:Ue?2:3},children:ye&&(0,Z.jsx)(t.A,{sx:{mt:1},children:(0,Z.jsx)(d.Ay,{container:!0,spacing:3,children:(0,Z.jsx)(d.Ay,{item:!0,xs:12,children:(0,Z.jsxs)(c.A,{elevation:0,className:"ios-shadow",sx:{borderRadius:4,overflow:"hidden",position:"relative"},children:[(0,Z.jsx)(t.A,{sx:{height:8,width:"100%",backgroundColor:ye.inStock?Je(ye.category):"#8E8E93"}}),(0,Z.jsxs)(x.A,{children:[(0,Z.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,Z.jsx)(f.A,{sx:{width:56,height:56,bgcolor:`${Je(ye.category)}20`,color:ye.inStock?Je(ye.category):"#8E8E93",mr:2},children:He(ye.category)}),(0,Z.jsxs)(t.A,{children:[(0,Z.jsx)(a.A,{variant:"h5",component:"div",sx:{fontWeight:700},children:ye.name}),(0,Z.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",mt:.5},children:[(0,Z.jsx)(g.A,{label:ye.category,size:"small",sx:{mr:1,bgcolor:`${Je(ye.category)}20`,color:Je(ye.category),fontWeight:500,borderRadius:3}}),(0,Z.jsx)(g.A,{label:ye.inStock?"In Stock":"Sold",size:"small",sx:{bgcolor:ye.inStock?"rgba(52, 199, 89, 0.1)":"rgba(142, 142, 147, 0.1)",color:ye.inStock?"#34C759":"#8E8E93",fontWeight:500,borderRadius:3}})]})]})]}),ye.description&&(0,Z.jsxs)(t.A,{sx:{mb:3},children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Description"}),(0,Z.jsx)(a.A,{variant:"body1",children:ye.description})]}),(0,Z.jsx)(h.A,{sx:{my:2}}),(0,Z.jsx)(a.A,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Financial Details"}),(0,Z.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,Z.jsxs)(d.Ay,{item:!0,xs:12,sm:6,md:3,children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Purchase Price"}),(0,Z.jsx)(a.A,{variant:"body1",sx:{fontWeight:500},children:Ye(ye.purchasePrice)})]}),(0,Z.jsxs)(d.Ay,{item:!0,xs:12,sm:6,md:3,children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:ye.inStock?"Selling Price":"Sold For"}),(0,Z.jsx)(a.A,{variant:"body1",sx:{fontWeight:500},children:Ye(ye.inStock?ye.sellingPrice:ye.soldPrice)})]}),(0,Z.jsxs)(d.Ay,{item:!0,xs:12,sm:6,md:3,children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:ye.inStock?"Current Value":"Final Value"}),(0,Z.jsx)(a.A,{variant:"body1",sx:{fontWeight:500},children:Ye(ye.assetValue||ye.purchasePrice)})]}),(0,Z.jsxs)(d.Ay,{item:!0,xs:12,sm:6,md:3,children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Quantity"}),(0,Z.jsx)(a.A,{variant:"body1",sx:{fontWeight:500},children:ye.quantity})]})]}),(0,Z.jsx)(h.A,{sx:{my:2}}),(0,Z.jsx)(a.A,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Additional Details"}),(0,Z.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,Z.jsxs)(d.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Purchase Date"}),(0,Z.jsx)(a.A,{variant:"body1",sx:{fontWeight:500},children:Ge(ye.purchaseDate)})]}),!ye.inStock&&(0,Z.jsxs)(d.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Sold Date"}),(0,Z.jsx)(a.A,{variant:"body1",sx:{fontWeight:500},children:Ge(ye.soldDate)})]}),(0,Z.jsxs)(d.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Supplier"}),(0,Z.jsx)(a.A,{variant:"body1",sx:{fontWeight:500},children:ye.supplier||"-"})]}),(0,Z.jsxs)(d.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Serial Number"}),(0,Z.jsx)(a.A,{variant:"body1",sx:{fontWeight:500},children:ye.serialNumber||"-"})]})]}),ye.notes&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(h.A,{sx:{my:2}}),(0,Z.jsx)(a.A,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:"Notes"}),(0,Z.jsx)(a.A,{variant:"body1",children:ye.notes})]}),ye.inStock&&(0,Z.jsxs)(t.A,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:[(0,Z.jsx)(n.A,{variant:"outlined",color:"primary",startIcon:(0,Z.jsx)($.A,{}),onClick:()=>{or(),tr(ye)},sx:{borderRadius:3,mr:1,borderColor:"#34C759",color:"#34C759","&:hover":{borderColor:"#2EB351",backgroundColor:"rgba(52, 199, 89, 0.1)"}},children:"Mark as Sold"}),(0,Z.jsx)(n.A,{variant:"outlined",color:"primary",startIcon:(0,Z.jsx)(q.A,{}),onClick:()=>{or(),ir(ye)},sx:{borderRadius:3},children:"Edit Product"})]})]})]})})})})}),(0,Z.jsx)(R.A,{sx:{px:3,py:2,backgroundColor:"rgba(0,0,0,0.02)",borderTop:"1px solid rgba(0,0,0,0.05)"},children:(0,Z.jsx)(n.A,{onClick:or,sx:{fontWeight:500,borderRadius:3,px:3},children:"Close"})})]}),(0,Z.jsxs)(P.A,{open:ke,onClose:()=>{ce||Be||(or(),Le(null))},PaperProps:{sx:{borderRadius:4,overflow:"hidden",maxWidth:"400px"}},children:[(0,Z.jsx)(S.A,{sx:{pt:3,px:3},children:(0,Z.jsx)(a.A,{variant:"h6",sx:{fontWeight:600},children:"Delete Product"})}),(0,Z.jsxs)(w.A,{sx:{px:3,pt:1},children:[qe&&(0,Z.jsx)(o.A,{severity:"error",sx:{mb:2,borderRadius:2,"& .MuiAlert-message":{fontWeight:500}},action:(0,Z.jsx)(n.A,{color:"inherit",size:"small",onClick:()=>Le(null),children:"Dismiss"}),children:qe}),(0,Z.jsx)(a.A,{variant:"body1",sx:{mb:2},children:"Are you sure you want to delete this product? This action cannot be undone."}),ye&&(0,Z.jsx)(c.A,{elevation:0,sx:{mt:2,borderRadius:3,bgcolor:"rgba(255, 59, 48, 0.05)",border:"1px solid rgba(255, 59, 48, 0.1)"},children:(0,Z.jsx)(x.A,{sx:{px:2,py:1.5},children:(0,Z.jsxs)(t.A,{sx:{display:"flex",alignItems:"center"},children:[(0,Z.jsx)(f.A,{sx:{width:36,height:36,bgcolor:`${Je(ye.category)}20`,color:Je(ye.category),mr:1.5},children:He(ye.category)}),(0,Z.jsxs)(t.A,{children:[(0,Z.jsx)(a.A,{variant:"body1",sx:{fontWeight:600},children:ye.name}),(0,Z.jsx)(a.A,{variant:"body2",color:"text.secondary",children:Ye(ye.assetValue||ye.purchasePrice)})]})]})})})]}),(0,Z.jsxs)(R.A,{sx:{px:3,py:2,backgroundColor:"rgba(0,0,0,0.02)",borderTop:"1px solid rgba(0,0,0,0.05)"},children:[(0,Z.jsx)(n.A,{onClick:or,disabled:ce||Be,sx:{fontWeight:500,borderRadius:3,px:3},children:"Cancel"}),(0,Z.jsx)(n.A,{onClick:async()=>{try{Te(!0),Le(null),console.log(`Attempting to delete product with ID: ${ye._id}`);const e=await ae(ye._id);console.log(`Delete product result: ${e}`),e?(console.log("Product deleted successfully, closing dialog"),or()):(console.error(`Delete product failed: ${xe||"No specific error provided"}`),Le(xe||"Failed to delete product. Please try again later."))}catch(e){console.error("Error in handleDeleteConfirm:",e),Le(`Failed to delete product: ${e.message||"An unexpected error occurred"}`)}finally{Te(!1)}},color:"error",variant:"contained",disabled:ce||Be,startIcon:ce||Be?(0,Z.jsx)(l.A,{size:16,color:"inherit"}):null,sx:{fontWeight:600,borderRadius:3,px:3,bgcolor:"#FF3B30","&:hover":{bgcolor:"#E6352C"},boxShadow:"0 4px 10px rgba(255, 59, 48, 0.3)"},children:ce||Be?"Deleting...":"Delete"})]})]})]})}}}]);
//# sourceMappingURL=154.45075c8d.chunk.js.map