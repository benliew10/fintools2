"use strict";(self.webpackChunkfintools_client=self.webpackChunkfintools_client||[]).push([[326],{51326:(e,n,r)=>{r.r(n),r.d(n,{default:()=>ee});var i=r(65043),t=r(24836),s=r(26240),o=r(30344),a=r(96446),d=r(81637),l=r(85865),c=r(63336),x=r(11906),h=r(17392),u=r(81045),b=r(68903),A=r(12110),j=r(26494),m=r(88911),p=r(43845),g=r(39336),y=r(10611),f=r(35721),v=r(37918),C=r(23851),F=r(48734),w=r(8266),k=r(79650),R=r(71806),I=r(84882),S=r(28076),$=r(10039),P=r(73460),z=r(77739),W=r(83462),_=r(4219),D=r(35316),N=r(14194),T=r(67784),E=r(51787),M=r(29347),B=r(47805),L=r(87241),U=r(96686),q=r(59893),Y=r(83560),G=r(33438),H=r(59506),J=r(59540),K=r(47908),O=r(64668),Q=r(86213),V=r(70579);const X=i.forwardRef((function(e,n){return(0,V.jsx)(t.A,{direction:"up",ref:n,...e})})),Z=["#007AFF","#FF2D55","#FF9500","#34C759","#5856D6","#AF52DE","#FF3B30","#5AC8FA","#FFCC00"];function ee(){const{founderContributions:e,loading:n,error:r,loadFounderContributions:t}=(0,i.useContext)(O.r),ee=(0,s.A)(),ne=(0,o.A)(ee.breakpoints.down("sm")),re=(0,o.A)(ee.breakpoints.down("md")),[ie,te]=(0,i.useState)(!1),[se,oe]=(0,i.useState)(null),[ae,de]=(0,i.useState)(""),[le,ce]=(0,i.useState)(!1),[xe,he]=(0,i.useState)(null),[ue,be]=(0,i.useState)(!1);(0,i.useEffect)((()=>{t()}),[t]);const Ae=e=>void 0===e||null===e?"-":new Intl.NumberFormat("ms-MY",{style:"currency",currency:"MYR"}).format(e),je=e.reduce(((e,n)=>e+n.fundContribution),0),me=(e,n)=>{if(n<Z.length)return Z[n];return`hsl(${e.split("").reduce(((e,n)=>n.charCodeAt(0)+((e<<5)-e)),0)%360}, 70%, 60%)`},pe=e=>e?e.split(" ").map((e=>e[0])).join("").toUpperCase().substring(0,2):"?",ge={labels:e.map((e=>e.name)),datasets:[{data:e.map((e=>e.fundContribution)),backgroundColor:e.map(((e,n)=>`${me(e.name,n)}CC`)),borderColor:e.map(((e,n)=>me(e.name,n))),borderWidth:1}]},ye=e=>{oe(e),de(e.fundContribution.toString()),he(null),be(!1),te(!0)},fe=()=>{te(!1)};return n?(0,V.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"80vh",p:3},children:[(0,V.jsx)(d.A,{size:ne?40:60,thickness:4,sx:{mb:2}}),(0,V.jsx)(l.A,{variant:"h6",color:"text.secondary",align:"center",children:"Loading founder data..."})]}):r?(0,V.jsx)(a.A,{sx:{p:3},children:(0,V.jsxs)(c.A,{elevation:2,sx:{p:3,borderRadius:4,bgcolor:"error.light",color:"error.contrastText"},children:[(0,V.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Error Loading Data"}),(0,V.jsx)(l.A,{variant:"body1",children:r}),(0,V.jsx)(x.A,{variant:"contained",sx:{mt:2},onClick:t,children:"Try Again"})]})}):(0,V.jsxs)(a.A,{sx:{pb:ne?7:3},children:[(0,V.jsxs)(a.A,{sx:{pt:ne?2:3,pb:2,px:ne?2:3,background:"dark"===ee.palette.mode?`linear-gradient(to right, ${ee.palette.primary.dark}, ${ee.palette.secondary.dark})`:`linear-gradient(to right, ${ee.palette.primary.light}, ${ee.palette.secondary.light})`,borderRadius:ne?"0 0 24px 24px":"0 0 16px 16px",mb:2,color:"white"},children:[(0,V.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,V.jsx)(l.A,{variant:ne?"h5":"h4",sx:{fontWeight:600},children:"Founder Contributions"}),(0,V.jsx)(h.A,{color:"inherit",onClick:t,sx:{bgcolor:"rgba(255,255,255,0.2)","&:hover":{bgcolor:"rgba(255,255,255,0.3)"}},children:(0,V.jsx)(B.A,{})})]}),(0,V.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[(0,V.jsx)(u.A,{sx:{bgcolor:"white",color:ee.palette.primary.main,mr:1.5},children:(0,V.jsx)(L.A,{})}),(0,V.jsxs)(a.A,{children:[(0,V.jsx)(l.A,{variant:"body2",sx:{opacity:.9},children:"Total Contributions"}),(0,V.jsx)(l.A,{variant:"h5",sx:{fontWeight:"bold"},children:Ae(je)})]})]})]}),(0,V.jsx)(a.A,{sx:{px:ne?2:3},children:(0,V.jsxs)(b.Ay,{container:!0,spacing:3,children:[ne&&(0,V.jsx)(b.Ay,{item:!0,xs:12,children:(0,V.jsx)(A.A,{sx:{borderRadius:4,boxShadow:"0 2px 10px rgba(0,0,0,0.08)"},children:(0,V.jsxs)(j.A,{children:[(0,V.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Number of Founders"}),(0,V.jsx)(l.A,{variant:"h5",sx:{fontWeight:"bold",mb:1},children:e.length}),e.length>0&&(0,V.jsx)(m.A,{direction:"row",spacing:1,sx:{mt:2,overflow:"auto",pb:1},children:e.map(((e,n)=>(0,V.jsx)(p.A,{avatar:(0,V.jsx)(u.A,{sx:{bgcolor:me(e.name,n)},children:pe(e.name)}),label:`${(e.fundContribution/je*100).toFixed(0)}%`,variant:"outlined",sx:{borderRadius:8}},e._id)))})]})})}),(0,V.jsx)(b.Ay,{item:!0,xs:12,md:0===je?12:6,children:(0,V.jsxs)(c.A,{elevation:2,sx:{p:3,borderRadius:4,height:"100%",boxShadow:"0 2px 10px rgba(0,0,0,0.08)"},children:[(0,V.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,V.jsx)(u.A,{sx:{bgcolor:ee.palette.primary.light,mr:1,width:32,height:32},children:(0,V.jsx)(U.A,{fontSize:"small"})}),(0,V.jsx)(l.A,{variant:"h6",children:"Contribution Distribution"})]}),(0,V.jsx)(g.A,{sx:{mb:2}}),(0,V.jsx)(a.A,{sx:{height:250,display:"flex",justifyContent:"center",alignItems:"center"},children:e.length>0&&je>0?(0,V.jsx)(K.Fq,{data:ge,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:re?"bottom":"right",labels:{boxWidth:12,padding:15,font:{size:11}}},tooltip:{callbacks:{label:function(e){const n=e.raw,r=(n/je*100).toFixed(1);return`${e.label}: ${Ae(n)} (${r}%)`}}}}}}):(0,V.jsxs)(a.A,{sx:{textAlign:"center"},children:[(0,V.jsx)(l.A,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:"No contribution data available"}),(0,V.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Update founder contributions to see the distribution chart"})]})})]})}),!ne&&je>0&&(0,V.jsx)(b.Ay,{item:!0,md:6,children:(0,V.jsxs)(c.A,{elevation:2,sx:{p:3,borderRadius:4,height:"100%",boxShadow:"0 2px 10px rgba(0,0,0,0.08)"},children:[(0,V.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,V.jsx)(u.A,{sx:{bgcolor:ee.palette.primary.light,mr:1,width:32,height:32},children:(0,V.jsx)(q.A,{fontSize:"small"})}),(0,V.jsx)(l.A,{variant:"h6",children:"Equity Distribution"})]}),(0,V.jsx)(g.A,{sx:{mb:2}}),(0,V.jsx)(a.A,{children:e.map(((e,n)=>{const r=je>0?e.fundContribution/je*100:0;return(0,V.jsxs)(a.A,{sx:{mb:2},children:[(0,V.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:.5},children:[(0,V.jsx)(u.A,{sx:{width:28,height:28,mr:1,fontSize:"0.8rem",bgcolor:me(e.name,n)},children:pe(e.name)}),(0,V.jsx)(l.A,{variant:"body2",sx:{flex:1},children:e.name}),(0,V.jsxs)(l.A,{variant:"body2",sx:{fontWeight:"bold"},children:[r.toFixed(1),"%"]})]}),(0,V.jsx)(y.A,{variant:"determinate",value:r,sx:{height:8,borderRadius:4,bgcolor:"dark"===ee.palette.mode?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.08)","& .MuiLinearProgress-bar":{bgcolor:me(e.name,n)}}})]},e._id)}))})]})}),(0,V.jsx)(b.Ay,{item:!0,xs:12,children:(0,V.jsxs)(c.A,{elevation:2,sx:{borderRadius:4,overflow:"hidden",boxShadow:"0 2px 10px rgba(0,0,0,0.08)"},children:[(0,V.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,borderBottom:1,borderColor:"divider"},children:[(0,V.jsx)(l.A,{variant:"h6",children:"Founder Details"}),(0,V.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:[e.length," ",1===e.length?"Founder":"Founders"]})]}),ne?(0,V.jsx)(f.A,{disablePadding:!0,children:e.length>0?e.map(((e,n)=>(0,V.jsxs)(v.Ay,{divider:!0,button:!0,onClick:()=>ye(e),children:[(0,V.jsx)(C.A,{children:(0,V.jsx)(u.A,{sx:{bgcolor:me(e.name,n)},children:pe(e.name)})}),(0,V.jsx)(F.A,{primary:e.name,secondary:(0,V.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mt:.5},children:[(0,V.jsx)(p.A,{label:`${(e.fundContribution/je*100).toFixed(1)}%`,size:"small",sx:{mr:1,borderRadius:8,bgcolor:`${me(e.name,n)}22`,color:me(e.name,n)}}),(0,V.jsx)(l.A,{variant:"body2",component:"span",sx:{fontWeight:"medium"},children:Ae(e.fundContribution)})]})}),(0,V.jsx)(w.A,{children:(0,V.jsx)(h.A,{edge:"end",onClick:n=>{n.stopPropagation(),ye(e)},children:(0,V.jsx)(Y.A,{})})})]},e._id))):(0,V.jsx)(v.Ay,{children:(0,V.jsx)(F.A,{primary:"No founder contributions found",secondary:"Add founder contributions to see them here",sx:{textAlign:"center",py:3}})})}):(0,V.jsx)(k.A,{children:(0,V.jsxs)(R.A,{children:[(0,V.jsx)(I.A,{children:(0,V.jsxs)(S.A,{children:[(0,V.jsx)($.A,{children:"Founder"}),(0,V.jsx)($.A,{children:"Contribution Amount"}),(0,V.jsx)($.A,{children:"Percentage"}),(0,V.jsx)($.A,{align:"right",children:"Actions"})]})}),(0,V.jsx)(P.A,{children:e.length>0?e.map(((e,n)=>(0,V.jsxs)(S.A,{hover:!0,sx:{"&:hover":{bgcolor:ee.palette.action.hover,cursor:"pointer"}},onClick:()=>ye(e),children:[(0,V.jsx)($.A,{children:(0,V.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[(0,V.jsx)(u.A,{sx:{width:32,height:32,mr:1.5,bgcolor:me(e.name,n)},children:pe(e.name)}),e.name]})}),(0,V.jsx)($.A,{children:Ae(e.fundContribution)}),(0,V.jsx)($.A,{children:(0,V.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[(0,V.jsx)(l.A,{variant:"body2",sx:{mr:1},children:je>0?`${(e.fundContribution/je*100).toFixed(1)}%`:"0%"}),(0,V.jsx)(y.A,{variant:"determinate",value:je>0?e.fundContribution/je*100:0,sx:{width:60,height:6,borderRadius:3,"& .MuiLinearProgress-bar":{bgcolor:me(e.name,n)}}})]})}),(0,V.jsx)($.A,{align:"right",children:(0,V.jsx)(z.A,{title:"Edit Contribution",children:(0,V.jsx)(h.A,{onClick:n=>{n.stopPropagation(),ye(e)},color:"primary",size:"small",children:(0,V.jsx)(Y.A,{fontSize:"small"})})})})]},e._id))):(0,V.jsx)(S.A,{children:(0,V.jsx)($.A,{colSpan:4,align:"center",children:(0,V.jsx)(l.A,{variant:"body1",sx:{py:3},children:"No founder contributions found"})})})})]})})]})})]})}),(0,V.jsxs)(W.A,{open:ie,onClose:le?void 0:fe,TransitionComponent:X,fullScreen:ne,PaperProps:{sx:{borderRadius:ne?0:4}},children:[(0,V.jsxs)(_.A,{sx:{bgcolor:ee.palette.primary.main,color:ee.palette.primary.contrastText,display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Update Contribution Amount",ne&&(0,V.jsx)(h.A,{edge:"end",color:"inherit",onClick:fe,disabled:le,children:(0,V.jsx)(G.A,{})})]}),(0,V.jsxs)(D.A,{sx:{pt:3},children:[xe&&(0,V.jsx)(N.A,{severity:"error",sx:{mb:2,borderRadius:2},children:xe}),ue&&(0,V.jsx)(N.A,{severity:"success",sx:{mb:2,borderRadius:2},icon:(0,V.jsx)(H.A,{}),children:"Contribution updated successfully!"}),se&&(0,V.jsxs)(a.A,{sx:{pt:1},children:[(0,V.jsxs)(b.Ay,{container:!0,spacing:2,alignItems:"center",sx:{mb:3},children:[(0,V.jsx)(b.Ay,{item:!0,children:(0,V.jsx)(u.A,{sx:{width:56,height:56,bgcolor:me(se.name,e.findIndex((e=>e._id===se._id)))},children:pe(se.name)})}),(0,V.jsxs)(b.Ay,{item:!0,xs:!0,children:[(0,V.jsx)(l.A,{variant:"h6",sx:{fontWeight:"medium"},children:se.name}),(0,V.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:["Current contribution: ",Ae(se.fundContribution)]})]})]}),(0,V.jsx)(T.A,{autoFocus:!0,margin:"dense",label:"New Contribution Amount",type:"number",fullWidth:!0,value:ae,onChange:e=>de(e.target.value),InputProps:{startAdornment:(0,V.jsx)(E.A,{position:"start",children:"RM"}),sx:{borderRadius:4}},disabled:le,sx:{mb:2}}),(0,V.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"This will adjust the equity percentage based on the updated contribution."})]})]}),(0,V.jsxs)(M.A,{sx:{px:3,pb:3},children:[(0,V.jsx)(x.A,{onClick:fe,disabled:le,sx:{borderRadius:8},children:"Cancel"}),(0,V.jsx)(x.A,{onClick:async()=>{if(ae&&!isNaN(parseFloat(ae)))try{ce(!0),he(null),await Q.A.put(`/api/v1/auth/update-contribution/${se._id}`,{fundContribution:parseFloat(ae)}),be(!0),ce(!1),setTimeout((()=>{t(),fe()}),1500)}catch(r){var e,n;he((null===(e=r.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.error)||"Failed to update contribution"),ce(!1)}else he("Please enter a valid amount")},variant:"contained",color:"primary",disabled:le,startIcon:le?(0,V.jsx)(d.A,{size:20}):(0,V.jsx)(J.A,{}),sx:{borderRadius:8},children:"Update"})]})]})]})}}}]);
//# sourceMappingURL=326.51fd600e.chunk.js.map