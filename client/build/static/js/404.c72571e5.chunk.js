"use strict";(self.webpackChunkfintools_client=self.webpackChunkfintools_client||[]).push([[404],{47225:(e,s,t)=>{t.d(s,{A:()=>a});var n=t(66734),r=t(70579);const a=(0,n.A)((0,r.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday")},59540:(e,s,t)=>{t.d(s,{A:()=>a});var n=t(66734),r=t(70579);const a=(0,n.A)((0,r.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward")},65404:(e,s,t)=>{t.r(s),t.d(s,{default:()=>fe});var n=t(65043),r=t(24836),a=t(26240),i=t(30344),o=t(96446),l=t(81637),c=t(85865),d=t(63336),x=t(81045),h=t(11906),p=t(68903),A=t(39336),m=t(67784),u=t(51787),j=t(43845),b=t(8939),g=t(24056),y=t(12110),v=t(26494),f=t(17392),w=t(19090),C=t(79650),R=t(71806),I=t(84882),k=t(28076),S=t(10039),D=t(73460),W=t(24010),P=t(67373),T=t(35721),z=t(37918),M=t(53193),E=t(79190),L=t(69285),H=t(32143),F=t(83462),V=t(4219),$=t(35316),B=t(74605),O=t(51962),_=t(29347),N=t(58390),U=t(43278),Y=t(28393),q=t(59540),G=t(88645),J=t(66734),K=t(70579);const Q=(0,J.A)((0,K.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99zM21 9l-3.99-4v3H10v2h7.01v3z"}),"SwapHoriz");var X=t(79641),Z=t(27012);const ee=(0,J.A)((0,K.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"}),"Payment"),se=(0,J.A)((0,K.jsx)("path",{d:"M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2zm-9-2h10V8H12zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"AccountBalanceWallet");var te=t(33438),ne=t(47805),re=t(70141),ae=t(47225),ie=t(79484),oe=t(59383);const le=(0,J.A)((0,K.jsx)("path",{d:"M14.94 4.66h-4.72l2.36-2.36zm-4.69 14.71h4.66l-2.33 2.33zM6.1 6.27 1.6 17.73h1.84l.92-2.45h5.11l.92 2.45h1.84L7.74 6.27zm-1.13 7.37 1.94-5.18 1.94 5.18zm10.76 2.5h6.12v1.59h-8.53v-1.29l5.92-8.56h-5.88v-1.6h8.3v1.26z"}),"SortByAlpha");var ce=t(83560),de=t(51387),xe=t(3632),he=t(37141),pe=t(86213),Ae=t(45479),me=t(43666),ue=t(58355);var je=t(39993),be=t(72128),ge=t(86255),ye=t(9519);const ve=n.forwardRef((function(e,s){return(0,K.jsx)(r.A,{direction:"up",ref:s,...e})}));function fe(){const[e,s]=(0,n.useState)([]),[t,r]=(0,n.useState)(!0),[J,fe]=(0,n.useState)(""),[we,Ce]=(0,n.useState)(0),[Re,Ie]=(0,n.useState)(10),[ke,Se]=(0,n.useState)(!1),[De,We]=(0,n.useState)("add"),[Pe,Te]=(0,n.useState)(null),[ze,Me]=(0,n.useState)({type:"expense",amount:"",description:"",category:"",date:new Date,account:"main",notes:"",isAsset:!1,assetDepreciationRate:0}),[Ee,Le]=(0,n.useState)(!1),[He,Fe]=(0,n.useState)(null),[Ve,$e]=(0,n.useState)(""),[Be,Oe]=(0,n.useState)("all"),[_e,Ne]=(0,n.useState)("all"),[Ue,Ye]=(0,n.useState)("all"),[qe,Ge]=(0,n.useState)("all"),[Je,Ke]=(0,n.useState)(function(e,s){(0,me.A)(2,arguments);var t=(0,ue.A)(s);return(0,Ae.A)(e,-t)}(new Date,30)),[Qe,Xe]=(0,n.useState)(new Date),[Ze,es]=(0,n.useState)(!1),[ss,ts]=(0,n.useState)(0),[ns,rs]=(0,n.useState)("date"),[as,is]=(0,n.useState)("desc"),os=(0,a.A)(),ls=(0,i.A)(os.breakpoints.down("sm"));(0,i.A)(os.breakpoints.between("sm","md"));(0,n.useEffect)((()=>{cs()}),[]);const cs=async()=>{try{r(!0);const e=await pe.A.get("/api/v1/transactions");s(e.data),fe("")}catch(e){fe("Failed to load transactions. Please try again."),console.error(e)}finally{r(!1)}},ds=()=>{We("add"),Te(null),Me({type:"expense",amount:"",description:"",category:"",date:new Date,account:"main",notes:"",isAsset:!1,assetDepreciationRate:0}),Se(!0)},xs=e=>{We("edit"),Te(e),Me({type:e.type||"expense",amount:e.amount||"",description:e.description||"",category:e.category||"",date:e.date?new Date(e.date):new Date,account:e.account||"main",notes:e.notes||"",isAsset:e.isAsset||!1,assetDepreciationRate:e.assetDepreciationRate||0}),Se(!0)},hs=e=>{We("view"),Te(e),Me({type:e.type||"expense",amount:e.amount||"",description:e.description||"",category:e.category||"",date:e.date?new Date(e.date):new Date,account:e.account||"main",notes:e.notes||"",isAsset:e.isAsset||!1,assetDepreciationRate:e.assetDepreciationRate||0}),Se(!0)},ps=()=>{Se(!1)},As=e=>{const{name:s,value:t}=e.target;Me((e=>({...e,[s]:t})))},ms=e=>{Fe(e),Le(!0)},us=()=>{Le(!1),Fe(null)},js=(e,s)=>{Ce(s)},bs=e=>{Ie(parseInt(e.target.value,10)),Ce(0)},gs=e=>{try{return(0,je.A)(new Date(e),"dd MMM yyyy")}catch(J){return"Invalid date"}},ys=e=>void 0===e||null===e?"-":new Intl.NumberFormat("ms-MY",{style:"currency",currency:"MYR",minimumFractionDigits:2}).format(e),vs=e=>{switch(e){case"income":return(0,K.jsx)(q.A,{sx:{color:os.palette.success.main}});case"expense":return(0,K.jsx)(G.A,{sx:{color:os.palette.error.main}});case"transfer":return(0,K.jsx)(Q,{sx:{color:os.palette.info.main}});case"investment":return(0,K.jsx)(X.A,{sx:{color:os.palette.warning.main}});default:return(0,K.jsx)(Z.A,{})}},fs=e=>{switch(e){case"income":return"success";case"expense":return"error";case"transfer":return"info";case"investment":return"warning";default:return"default"}},ws=e=>{switch(e){case"main":return"primary";case"savings":return"success";case"investment":return"warning";case"petty-cash":return"secondary";default:return"default"}};if(t)return(0,K.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"80vh",p:3},children:[(0,K.jsx)(l.A,{size:ls?40:60,thickness:4,sx:{mb:2,color:os.palette.primary.main}}),(0,K.jsx)(c.A,{variant:"h6",color:"text.secondary",align:"center",children:"Loading transactions..."}),(0,K.jsx)(c.A,{variant:"body2",color:"text.secondary",align:"center",sx:{mt:1,maxWidth:300},children:"Preparing your financial data for display"})]});if(J)return(0,K.jsx)(o.A,{sx:{p:3},children:(0,K.jsxs)(d.A,{elevation:2,sx:{p:3,borderRadius:4,bgcolor:"error.light",color:"error.contrastText"},children:[(0,K.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,K.jsx)(x.A,{sx:{bgcolor:"error.main",mr:2},children:(0,K.jsx)(te.A,{})}),(0,K.jsx)(c.A,{variant:"h6",children:"Error Loading Data"})]}),(0,K.jsx)(c.A,{variant:"body1",sx:{mb:3},children:J}),(0,K.jsx)(h.A,{variant:"contained",sx:{borderRadius:8,bgcolor:"white",color:"error.main","&:hover":{bgcolor:"rgba(255,255,255,0.9)"}},onClick:cs,startIcon:(0,K.jsx)(ne.A,{}),children:"Try Again"})]})});const Cs=e.filter((e=>{const s=""===Ve||e.description&&e.description.toLowerCase().includes(Ve.toLowerCase())||e.notes&&e.notes.toLowerCase().includes(Ve.toLowerCase())||e.category&&e.category.toLowerCase().includes(Ve.toLowerCase()),t="all"===Be||e.type===Be,n="all"===_e||e.account===_e,r="all"===Ue||e.category===Ue;let a=!0;if("all"!==qe){const s=new Date(e.date);if("thisMonth"===qe){const e=(0,be.A)(new Date),t=(0,ge.A)(new Date);a=(0,ye.A)(s,{start:e,end:t})}else if("lastMonth"===qe){const e=new Date;e.setMonth(e.getMonth()-1);const t=(0,be.A)(e),n=(0,ge.A)(e);a=(0,ye.A)(s,{start:t,end:n})}else"custom"===qe&&(a=(0,ye.A)(s,{start:Je,end:Qe}))}return s&&t&&n&&r&&a})),Rs=(e=>[...e].sort(((e,s)=>{if("date"===ns){const t=new Date(e.date),n=new Date(s.date);return"asc"===as?t-n:n-t}if("amount"===ns)return"asc"===as?e.amount-s.amount:s.amount-e.amount;if("description"===ns){const t=e.description.toLowerCase(),n=s.description.toLowerCase();return"asc"===as?t.localeCompare(n):n.localeCompare(t)}return 0})))(Cs),Is=Rs.slice(we*Re,we*Re+Re),ks=(()=>{const s={start:(0,be.A)(new Date),end:(0,ge.A)(new Date)},t={totalIncome:0,totalExpense:0,totalTransfer:0,totalInvestment:0,thisMonthIncome:0,thisMonthExpense:0,accountBalances:{main:0,savings:0,investment:0,"petty-cash":0}};return e.forEach((e=>{const n=parseFloat(e.amount),r=new Date(e.date),a=(0,ye.A)(r,{start:s.start,end:s.end});"income"===e.type?(t.totalIncome+=n,a&&(t.thisMonthIncome+=n),t.accountBalances[e.account]+=n):"expense"===e.type?(t.totalExpense+=n,a&&(t.thisMonthExpense+=n),t.accountBalances[e.account]-=n):"transfer"===e.type?t.totalTransfer+=n:"investment"===e.type&&(t.totalInvestment+=n)})),t})();return(0,K.jsx)(N.$,{dateAdapter:Y.h,children:(0,K.jsxs)(o.A,{sx:{pb:ls?7:3},children:[(0,K.jsxs)(o.A,{sx:{pt:ls?2:3,pb:2,px:ls?2:3,background:"dark"===os.palette.mode?`linear-gradient(135deg, ${os.palette.primary.dark}, ${os.palette.secondary.dark})`:`linear-gradient(135deg, ${os.palette.primary.main}, ${os.palette.secondary.main})`,borderRadius:ls?"0 0 24px 24px":"0 0 16px 16px",mb:2,boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[(0,K.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:ls?1:2},children:[(0,K.jsx)(c.A,{variant:ls?"h5":"h4",sx:{fontWeight:600,color:"#ffffff"},children:"Transactions"}),!ls&&(0,K.jsx)(h.A,{variant:"contained",startIcon:(0,K.jsx)(re.A,{}),onClick:ds,sx:{borderRadius:8,px:3,py:1,bgcolor:"white",color:os.palette.primary.main,"&:hover":{bgcolor:"rgba(255,255,255,0.9)"},boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},children:"Add Transaction"})]}),!ls&&(0,K.jsxs)(p.Ay,{container:!0,spacing:2,sx:{mt:1},children:[(0,K.jsx)(p.Ay,{item:!0,xs:12,md:3,children:(0,K.jsxs)(d.A,{elevation:2,sx:{p:2,borderRadius:4,bgcolor:"rgba(255,255,255,0.9)",display:"flex",alignItems:"center",backdropFilter:"blur(10px)",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},children:[(0,K.jsx)(x.A,{sx:{bgcolor:os.palette.success.main,mr:2},children:(0,K.jsx)(q.A,{})}),(0,K.jsxs)(o.A,{children:[(0,K.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Total Income"}),(0,K.jsx)(c.A,{variant:"h6",color:"success.main",sx:{fontWeight:"bold"},children:ys(ks.totalIncome)})]})]})}),(0,K.jsx)(p.Ay,{item:!0,xs:12,md:3,children:(0,K.jsxs)(d.A,{elevation:2,sx:{p:2,borderRadius:4,bgcolor:"rgba(255,255,255,0.9)",display:"flex",alignItems:"center",backdropFilter:"blur(10px)",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},children:[(0,K.jsx)(x.A,{sx:{bgcolor:os.palette.error.main,mr:2},children:(0,K.jsx)(G.A,{})}),(0,K.jsxs)(o.A,{children:[(0,K.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Total Expenses"}),(0,K.jsx)(c.A,{variant:"h6",color:"error.main",sx:{fontWeight:"bold"},children:ys(ks.totalExpense)})]})]})}),(0,K.jsx)(p.Ay,{item:!0,xs:12,md:3,children:(0,K.jsxs)(d.A,{elevation:2,sx:{p:2,borderRadius:4,bgcolor:"rgba(255,255,255,0.9)",display:"flex",alignItems:"center",cursor:"pointer",backdropFilter:"blur(10px)",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s","&:hover":{transform:"translateY(-2px)"}},onClick:()=>Ge("thisMonth"===qe?"all":"thisMonth"),children:[(0,K.jsx)(x.A,{sx:{bgcolor:os.palette.primary.main,mr:2},children:(0,K.jsx)(ae.A,{})}),(0,K.jsxs)(o.A,{children:[(0,K.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"This Month"}),(0,K.jsx)(c.A,{variant:"h6",sx:{fontWeight:"bold"},children:ys(ks.thisMonthIncome-ks.thisMonthExpense)})]})]})})]})]}),ls&&(0,K.jsx)(o.A,{sx:{px:2,mb:2},children:(0,K.jsx)(d.A,{elevation:2,sx:{p:2,borderRadius:4,overflow:"hidden",boxShadow:"0 2px 10px rgba(0,0,0,0.08)"},children:(0,K.jsxs)(p.Ay,{container:!0,spacing:2,children:[(0,K.jsxs)(p.Ay,{item:!0,xs:6,children:[(0,K.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(x.A,{sx:{bgcolor:os.palette.success.main,width:24,height:24,mr:1},children:(0,K.jsx)(q.A,{sx:{fontSize:14}})}),(0,K.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Income"})]}),(0,K.jsx)(c.A,{variant:"h6",color:"success.main",sx:{fontWeight:"bold",mt:.5},children:ys(ks.totalIncome)})]}),(0,K.jsxs)(p.Ay,{item:!0,xs:6,children:[(0,K.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(x.A,{sx:{bgcolor:os.palette.error.main,width:24,height:24,mr:1},children:(0,K.jsx)(G.A,{sx:{fontSize:14}})}),(0,K.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Expenses"})]}),(0,K.jsx)(c.A,{variant:"h6",color:"error.main",sx:{fontWeight:"bold",mt:.5},children:ys(ks.totalExpense)})]}),(0,K.jsxs)(p.Ay,{item:!0,xs:12,children:[(0,K.jsx)(A.A,{sx:{my:1}}),(0,K.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Balance"}),(0,K.jsx)(c.A,{variant:"h6",sx:{fontWeight:"bold"},children:ys(ks.totalIncome-ks.totalExpense)})]})]})})}),(0,K.jsx)(o.A,{sx:{px:ls?2:3,mb:2},children:(0,K.jsxs)(d.A,{sx:{p:2,borderRadius:4,boxShadow:"0 2px 10px rgba(0,0,0,0.08)"},children:[(0,K.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,K.jsx)(m.A,{placeholder:"Search transactions...",value:Ve,onChange:e=>$e(e.target.value),variant:"outlined",fullWidth:!0,size:ls?"small":"medium",InputProps:{startAdornment:(0,K.jsx)(u.A,{position:"start",children:(0,K.jsx)(ie.A,{})}),sx:{borderRadius:8}}}),!ls&&(0,K.jsx)(h.A,{startIcon:(0,K.jsx)(oe.A,{}),variant:"outlined",sx:{ml:2,borderRadius:8,whiteSpace:"nowrap",borderColor:"all"!==Be||"all"!==_e||"all"!==qe?os.palette.primary.main:void 0,bgcolor:"all"!==Be||"all"!==_e||"all"!==qe?"rgba(25, 118, 210, 0.08)":void 0},onClick:()=>es(!0),children:"all"!==Be||"all"!==_e||"all"!==qe?"Filters Applied":"Filters"}),!ls&&(0,K.jsx)(h.A,{startIcon:(0,K.jsx)(le,{}),variant:"outlined",sx:{ml:2,borderRadius:8,whiteSpace:"nowrap"},onClick:()=>{"date"===ns?is("asc"===as?"desc":"asc"):(rs("date"),is("desc"))},children:"date"===ns&&"desc"===as?"Newest":"Oldest"})]}),(0,K.jsxs)(o.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[(0,K.jsx)(j.A,{label:"All",color:"all"===Be?"primary":"default",onClick:()=>Oe("all"),sx:{borderRadius:8}}),(0,K.jsx)(j.A,{label:"Income",color:"income"===Be?"success":"default",onClick:()=>Oe("income"),icon:(0,K.jsx)(q.A,{}),sx:{borderRadius:8}}),(0,K.jsx)(j.A,{label:"Expense",color:"expense"===Be?"error":"default",onClick:()=>Oe("expense"),icon:(0,K.jsx)(G.A,{}),sx:{borderRadius:8}}),(0,K.jsx)(j.A,{label:"Transfer",color:"transfer"===Be?"info":"default",onClick:()=>Oe("transfer"),icon:(0,K.jsx)(Q,{}),sx:{borderRadius:8}}),(0,K.jsx)(j.A,{label:"Investment",color:"investment"===Be?"warning":"default",onClick:()=>Oe("investment"),icon:(0,K.jsx)(X.A,{}),sx:{borderRadius:8}})]})]})}),ls&&(0,K.jsx)(o.A,{sx:{px:2,mb:2},children:(0,K.jsxs)(b.A,{value:ss,onChange:(e,s)=>{ts(s),0===s&&Oe("all"),1===s&&Oe("income"),2===s&&Oe("expense")},variant:"fullWidth",sx:{"& .MuiTabs-indicator":{backgroundColor:os.palette.primary.main,height:3,borderRadius:1.5}},children:[(0,K.jsx)(g.A,{label:"All",sx:{textTransform:"none",fontWeight:0===ss?"bold":"normal"}}),(0,K.jsx)(g.A,{label:"Income",sx:{textTransform:"none",fontWeight:1===ss?"bold":"normal",color:1===ss?os.palette.success.main:"inherit"}}),(0,K.jsx)(g.A,{label:"Expenses",sx:{textTransform:"none",fontWeight:2===ss?"bold":"normal",color:2===ss?os.palette.error.main:"inherit"}})]})}),0===Is.length&&(0,K.jsxs)(o.A,{sx:{p:3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"200px"},children:[(0,K.jsx)(x.A,{sx:{bgcolor:"rgba(25, 118, 210, 0.08)",width:60,height:60,mb:2},children:(0,K.jsx)(Z.A,{sx:{color:os.palette.primary.main,fontSize:32}})}),(0,K.jsx)(c.A,{variant:"h6",color:"text.secondary",align:"center",gutterBottom:!0,children:"No transactions found"}),(0,K.jsx)(c.A,{variant:"body2",color:"text.secondary",align:"center",sx:{mb:3,maxWidth:300},children:Ve||"all"!==Be||"all"!==_e||"all"!==Ue||"all"!==qe?"Try adjusting your filters to see more results":"Get started by adding your first transaction"}),(0,K.jsx)(h.A,{variant:"contained",startIcon:(0,K.jsx)(re.A,{}),onClick:ds,sx:{borderRadius:8},children:"Add Transaction"})]}),ls&&Is.length>0&&(0,K.jsxs)(o.A,{sx:{px:2},children:[Is.map((e=>(0,K.jsx)(y.A,{sx:{mb:2,borderRadius:4,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s, box-shadow 0.2s","&:active":{transform:"scale(0.98)",boxShadow:"0 1px 4px rgba(0,0,0,0.1)"}},onClick:()=>hs(e),children:(0,K.jsxs)(v.A,{sx:{p:2,"&:last-child":{pb:2}},children:[(0,K.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,K.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(x.A,{sx:{bgcolor:`${os.palette[fs(e.type)].light}22`,color:os.palette[fs(e.type)].main,width:40,height:40},children:vs(e.type)}),(0,K.jsxs)(o.A,{sx:{ml:2},children:[(0,K.jsx)(c.A,{variant:"body1",sx:{fontWeight:"medium"},children:e.description}),(0,K.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:[gs(e.date)," \u2022 ",e.category]})]})]}),(0,K.jsxs)(c.A,{variant:"body1",sx:{fontWeight:"bold",color:"expense"===e.type?os.palette.error.main:"income"===e.type?os.palette.success.main:os.palette.text.primary},children:["expense"===e.type?"-":"income"===e.type?"+":"",ys(e.amount)]})]}),(0,K.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",mt:1},children:[(0,K.jsx)(j.A,{label:e.account,size:"small",color:ws(e.account),variant:"outlined",sx:{borderRadius:8}}),(0,K.jsxs)(o.A,{children:[(0,K.jsx)(f.A,{size:"small",color:"primary",onClick:s=>{s.stopPropagation(),xs(e)},sx:{backgroundColor:"rgba(25, 118, 210, 0.08)",mr:1},children:(0,K.jsx)(ce.A,{fontSize:"small"})}),(0,K.jsx)(f.A,{size:"small",color:"error",onClick:s=>{s.stopPropagation(),ms(e)},sx:{backgroundColor:"rgba(211, 47, 47, 0.08)"},children:(0,K.jsx)(de.A,{fontSize:"small"})})]})]})]})},e._id))),Cs.length>Re&&(0,K.jsx)(o.A,{sx:{display:"flex",justifyContent:"center",mb:2},children:(0,K.jsx)(w.A,{component:"div",count:Cs.length,page:we,onPageChange:js,rowsPerPage:Re,onRowsPerPageChange:bs,labelRowsPerPage:"",rowsPerPageOptions:[5,10,25]})})]}),!ls&&Is.length>0&&(0,K.jsxs)(d.A,{elevation:2,sx:{mx:3,borderRadius:4,overflow:"hidden",boxShadow:"0 2px 10px rgba(0,0,0,0.08)"},children:[(0,K.jsx)(C.A,{children:(0,K.jsxs)(R.A,{children:[(0,K.jsx)(I.A,{children:(0,K.jsxs)(k.A,{sx:{bgcolor:"dark"===os.palette.mode?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)"},children:[(0,K.jsx)(S.A,{sx:{fontWeight:"bold"},children:"Date"}),(0,K.jsx)(S.A,{sx:{fontWeight:"bold"},children:"Description"}),(0,K.jsx)(S.A,{sx:{fontWeight:"bold"},children:"Type"}),(0,K.jsx)(S.A,{sx:{fontWeight:"bold"},children:"Account"}),(0,K.jsx)(S.A,{sx:{fontWeight:"bold"},children:"Category"}),(0,K.jsx)(S.A,{align:"right",sx:{fontWeight:"bold"},children:"Amount (MYR)"}),(0,K.jsx)(S.A,{align:"center",sx:{fontWeight:"bold"},children:"Actions"})]})}),(0,K.jsx)(D.A,{children:Is.map((e=>(0,K.jsxs)(k.A,{hover:!0,sx:{"&:hover":{bgcolor:os.palette.action.hover,cursor:"pointer"}},onClick:()=>hs(e),children:[(0,K.jsx)(S.A,{children:gs(e.date)}),(0,K.jsx)(S.A,{children:e.description}),(0,K.jsx)(S.A,{children:(0,K.jsx)(j.A,{icon:vs(e.type),label:e.type.charAt(0).toUpperCase()+e.type.slice(1),color:fs(e.type),size:"small",sx:{borderRadius:8}})}),(0,K.jsx)(S.A,{children:(0,K.jsx)(j.A,{label:e.account.charAt(0).toUpperCase()+e.account.slice(1),color:ws(e.account),size:"small",variant:"outlined",sx:{borderRadius:8}})}),(0,K.jsx)(S.A,{children:e.category}),(0,K.jsx)(S.A,{align:"right",sx:{fontWeight:"bold",color:"expense"===e.type?"error.main":"income"===e.type?"success.main":"inherit"},children:ys(e.amount)}),(0,K.jsxs)(S.A,{align:"center",children:[(0,K.jsx)(f.A,{size:"small",color:"primary",onClick:s=>{s.stopPropagation(),hs(e)},sx:{mr:.5},children:(0,K.jsx)(xe.A,{fontSize:"small"})}),(0,K.jsx)(f.A,{size:"small",color:"secondary",onClick:s=>{s.stopPropagation(),xs(e)},sx:{mr:.5},children:(0,K.jsx)(ce.A,{fontSize:"small"})}),(0,K.jsx)(f.A,{size:"small",color:"error",onClick:s=>{s.stopPropagation(),ms(e)},children:(0,K.jsx)(de.A,{fontSize:"small"})})]})]},e._id)))})]})}),(0,K.jsx)(w.A,{component:"div",count:Cs.length,rowsPerPage:Re,page:we,onPageChange:js,onRowsPerPageChange:bs})]}),ls&&(0,K.jsx)(W.A,{color:"primary","aria-label":"add",sx:{position:"fixed",bottom:72,right:16,boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},onClick:ds,children:(0,K.jsx)(re.A,{})}),ls&&(0,K.jsx)(W.A,{size:"small",color:"secondary","aria-label":"filter",sx:{position:"fixed",bottom:72,left:16,boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},onClick:()=>es(!0),children:(0,K.jsx)(oe.A,{})}),(0,K.jsxs)(P.A,{anchor:"bottom",open:Ze,onClose:()=>es(!1),onOpen:()=>es(!0),PaperProps:{sx:{borderTopLeftRadius:16,borderTopRightRadius:16,maxHeight:"80vh"}},disableSwipeToOpen:!1,swipeAreaWidth:30,children:[(0,K.jsx)(o.A,{sx:{width:"100%",height:4,bgcolor:"rgba(0,0,0,0.1)",mx:"auto",mt:1,borderRadius:2}}),(0,K.jsxs)(o.A,{sx:{p:2},children:[(0,K.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,K.jsx)(c.A,{variant:"h6",sx:{fontWeight:"bold"},children:"Filters"}),(0,K.jsx)(f.A,{onClick:()=>es(!1),children:(0,K.jsx)(te.A,{})})]}),(0,K.jsxs)(T.A,{disablePadding:!0,children:[(0,K.jsx)(z.Ay,{children:(0,K.jsxs)(M.A,{fullWidth:!0,sx:{mb:2},children:[(0,K.jsx)(E.A,{children:"Transaction Type"}),(0,K.jsxs)(L.A,{value:Be,onChange:e=>Oe(e.target.value),label:"Transaction Type",sx:{borderRadius:8},children:[(0,K.jsx)(H.A,{value:"all",children:"All Types"}),(0,K.jsx)(H.A,{value:"income",children:"Income"}),(0,K.jsx)(H.A,{value:"expense",children:"Expense"}),(0,K.jsx)(H.A,{value:"transfer",children:"Transfer"}),(0,K.jsx)(H.A,{value:"investment",children:"Investment"})]})]})}),(0,K.jsx)(z.Ay,{children:(0,K.jsxs)(M.A,{fullWidth:!0,sx:{mb:2},children:[(0,K.jsx)(E.A,{children:"Account"}),(0,K.jsxs)(L.A,{value:_e,onChange:e=>Ne(e.target.value),label:"Account",sx:{borderRadius:8},children:[(0,K.jsx)(H.A,{value:"all",children:"All Accounts"}),(0,K.jsx)(H.A,{value:"main",children:"Main"}),(0,K.jsx)(H.A,{value:"savings",children:"Savings"}),(0,K.jsx)(H.A,{value:"investment",children:"Investment"}),(0,K.jsx)(H.A,{value:"petty-cash",children:"Petty Cash"})]})]})}),(0,K.jsx)(z.Ay,{children:(0,K.jsxs)(M.A,{fullWidth:!0,sx:{mb:2},children:[(0,K.jsx)(E.A,{children:"Date Range"}),(0,K.jsxs)(L.A,{value:qe,onChange:e=>Ge(e.target.value),label:"Date Range",sx:{borderRadius:8},children:[(0,K.jsx)(H.A,{value:"all",children:"All Time"}),(0,K.jsx)(H.A,{value:"thisMonth",children:"This Month"}),(0,K.jsx)(H.A,{value:"lastMonth",children:"Last Month"}),(0,K.jsx)(H.A,{value:"custom",children:"Custom Range"})]})]})}),"custom"===qe&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(z.Ay,{children:(0,K.jsx)(U.l,{label:"Start Date",value:Je,onChange:e=>Ke(e),renderInput:e=>(0,K.jsx)(m.A,{...e,fullWidth:!0,sx:{mb:2},InputProps:{...e.InputProps,sx:{borderRadius:8}}})})}),(0,K.jsx)(z.Ay,{children:(0,K.jsx)(U.l,{label:"End Date",value:Qe,onChange:e=>Xe(e),renderInput:e=>(0,K.jsx)(m.A,{...e,fullWidth:!0,InputProps:{...e.InputProps,sx:{borderRadius:8}}})})})]})]}),(0,K.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[(0,K.jsx)(h.A,{variant:"outlined",onClick:()=>{Oe("all"),Ne("all"),Ye("all"),Ge("all"),$e("")},sx:{borderRadius:8},children:"Clear All"}),(0,K.jsx)(h.A,{variant:"contained",onClick:()=>es(!1),sx:{borderRadius:8},children:"Apply Filters"})]})]})]}),(0,K.jsxs)(F.A,{open:ke,onClose:ps,maxWidth:"sm",fullWidth:!0,fullScreen:ls,TransitionComponent:ve,PaperProps:{sx:{borderRadius:ls?0:4,overflow:"hidden"}},children:[(0,K.jsxs)(o.A,{sx:{bgcolor:"dark"===os.palette.mode?`linear-gradient(135deg, ${os.palette.primary.dark}, ${os.palette.secondary.dark})`:`linear-gradient(135deg, ${os.palette.primary.main}, ${os.palette.secondary.main})`,py:2,px:3},children:[(0,K.jsx)(V.A,{sx:{p:0,color:"white",fontWeight:"medium"},children:"add"===De?"Add New Transaction":"edit"===De?"Edit Transaction":"Transaction Details"}),ls&&(0,K.jsx)(f.A,{edge:"end",color:"inherit",onClick:ps,sx:{position:"absolute",right:8,top:8},children:(0,K.jsx)(te.A,{})})]}),(0,K.jsx)($.A,{sx:{px:ls?2:3,py:3},children:(0,K.jsxs)(p.Ay,{container:!0,spacing:2,children:[(0,K.jsx)(p.Ay,{item:!0,xs:12,sm:6,children:(0,K.jsxs)(M.A,{fullWidth:!0,disabled:"view"===De,children:[(0,K.jsx)(E.A,{children:"Type"}),(0,K.jsxs)(L.A,{name:"type",value:ze.type,onChange:As,label:"Type",sx:{borderRadius:8},startAdornment:(0,K.jsx)(u.A,{position:"start",children:vs(ze.type)}),children:[(0,K.jsx)(H.A,{value:"income",children:(0,K.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(q.A,{sx:{mr:1,color:os.palette.success.main}}),"Income"]})}),(0,K.jsx)(H.A,{value:"expense",children:(0,K.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(G.A,{sx:{mr:1,color:os.palette.error.main}}),"Expense"]})}),(0,K.jsx)(H.A,{value:"transfer",children:(0,K.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(Q,{sx:{mr:1,color:os.palette.info.main}}),"Transfer"]})}),(0,K.jsx)(H.A,{value:"investment",children:(0,K.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(X.A,{sx:{mr:1,color:os.palette.warning.main}}),"Investment"]})})]})]})}),(0,K.jsx)(p.Ay,{item:!0,xs:12,sm:6,children:(0,K.jsxs)(M.A,{fullWidth:!0,disabled:"view"===De,children:[(0,K.jsx)(E.A,{children:"Account"}),(0,K.jsxs)(L.A,{name:"account",value:ze.account,onChange:As,label:"Account",sx:{borderRadius:8},startAdornment:(0,K.jsx)(u.A,{position:"start",children:(e=>{switch(e){case"savings":case"investment":return(0,K.jsx)(X.A,{});case"petty-cash":return(0,K.jsx)(ee,{});default:return(0,K.jsx)(se,{})}})(ze.account)}),children:[(0,K.jsx)(H.A,{value:"main",children:(0,K.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(se,{sx:{mr:1,color:os.palette.primary.main}}),"Main"]})}),(0,K.jsx)(H.A,{value:"savings",children:(0,K.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(X.A,{sx:{mr:1,color:os.palette.success.main}}),"Savings"]})}),(0,K.jsx)(H.A,{value:"investment",children:(0,K.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(X.A,{sx:{mr:1,color:os.palette.warning.main}}),"Investment"]})}),(0,K.jsx)(H.A,{value:"petty-cash",children:(0,K.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,K.jsx)(ee,{sx:{mr:1,color:os.palette.secondary.main}}),"Petty Cash"]})})]})]})}),(0,K.jsx)(p.Ay,{item:!0,xs:12,children:(0,K.jsx)(m.A,{fullWidth:!0,label:"Description",name:"description",value:ze.description,onChange:As,disabled:"view"===De,required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:4}}})}),(0,K.jsx)(p.Ay,{item:!0,xs:12,sm:6,children:(0,K.jsx)(m.A,{fullWidth:!0,label:"Amount",name:"amount",type:"number",value:ze.amount,onChange:As,disabled:"view"===De,required:!0,inputProps:{min:0,step:.01},InputProps:{startAdornment:(0,K.jsx)(u.A,{position:"start",children:"RM"}),sx:{borderRadius:4}}})}),(0,K.jsx)(p.Ay,{item:!0,xs:12,sm:6,children:(0,K.jsx)(U.l,{label:"Date",value:ze.date,onChange:e=>{Me((s=>({...s,date:e})))},disabled:"view"===De,renderInput:e=>(0,K.jsx)(m.A,{...e,fullWidth:!0,InputProps:{...e.InputProps,sx:{borderRadius:4}}})})}),(0,K.jsx)(p.Ay,{item:!0,xs:12,children:(0,K.jsxs)(M.A,{fullWidth:!0,disabled:"view"===De,children:[(0,K.jsx)(E.A,{children:"Category"}),(0,K.jsx)(L.A,{name:"category",value:ze.category,onChange:As,label:"Category",sx:{borderRadius:4},children:("expense"===ze.type?["Phone","Rental","Salary","Accessories","Marketing","Transport","Courier","Bonus","Advertisement","Other"]:"income"===ze.type?["Sales","Services","Investments","Grants","Royalties","Interest","Other"]:"transfer"===ze.type?["Internal Transfer","External Transfer","Other"]:["Equity","Debt","Convertible","Other"]).map((e=>(0,K.jsx)(H.A,{value:e,children:e},e)))})]})}),"expense"===ze.type&&(Ss=ze.category,["Phone","Accessories","Marketing","Transport","Other"].includes(Ss))&&(0,K.jsx)(p.Ay,{item:!0,xs:12,children:(0,K.jsx)(d.A,{elevation:0,sx:{p:2,borderRadius:4,bgcolor:"dark"===os.palette.mode?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)"},children:(0,K.jsx)(B.A,{control:(0,K.jsx)(O.A,{checked:ze.isAsset,onChange:e=>{Me({...ze,isAsset:e.target.checked})},name:"isAsset",color:"primary",disabled:"view"===De}),label:"Record as an asset (for items that have long-term value)"})})}),"expense"===ze.type&&ze.isAsset&&(0,K.jsx)(p.Ay,{item:!0,xs:12,sm:6,children:(0,K.jsx)(m.A,{fullWidth:!0,label:"Depreciation Rate (%)",name:"assetDepreciationRate",type:"number",value:ze.assetDepreciationRate,onChange:As,disabled:"view"===De,inputProps:{min:0,max:100,step:.1},helperText:"Annual depreciation rate (0-100%)",InputProps:{sx:{borderRadius:4}}})}),(0,K.jsx)(p.Ay,{item:!0,xs:12,children:(0,K.jsx)(m.A,{fullWidth:!0,label:"Notes",name:"notes",value:ze.notes,onChange:As,disabled:"view"===De,multiline:!0,rows:3,InputProps:{sx:{borderRadius:4}}})}),"view"===De&&(0,K.jsx)(p.Ay,{item:!0,xs:12,children:(0,K.jsxs)(o.A,{sx:{mt:2,p:2,borderRadius:2,bgcolor:"dark"===os.palette.mode?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)"},children:[(0,K.jsxs)(c.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Created: ",gs((null===Pe||void 0===Pe?void 0:Pe.createdAt)||new Date)]}),(null===Pe||void 0===Pe?void 0:Pe.updatedAt)&&Pe.updatedAt!==Pe.createdAt&&(0,K.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Last Updated: ",gs(Pe.updatedAt)]})]})})]})}),(0,K.jsxs)(_.A,{sx:{px:3,pb:3},children:[(0,K.jsx)(h.A,{onClick:ps,color:"primary",sx:{borderRadius:8},children:"view"===De?"Close":"Cancel"}),"view"!==De&&(0,K.jsx)(h.A,{onClick:async()=>{try{if("add"===De){const e=await pe.A.post("/api/v1/transactions",ze);s((s=>[...s,e.data]))}else if("edit"===De){const e=await pe.A.put(`/api/v1/transactions/${Pe._id}`,ze);s((s=>s.map((s=>s._id===Pe._id?e.data:s))))}Se(!1)}catch(e){console.error("Error saving transaction:",e)}},color:"primary",variant:"contained",disabled:!ze.description||!ze.amount||!ze.category,startIcon:"add"===De?(0,K.jsx)(re.A,{}):(0,K.jsx)(he.A,{}),sx:{borderRadius:8},children:"add"===De?"Add":"Save"}),"view"===De&&(0,K.jsx)(h.A,{onClick:()=>{ps(),xs(Pe)},color:"primary",variant:"contained",startIcon:(0,K.jsx)(ce.A,{}),sx:{borderRadius:8},children:"Edit"})]})]}),(0,K.jsxs)(F.A,{open:Ee,onClose:us,PaperProps:{sx:{borderRadius:4,overflow:"hidden"}},TransitionComponent:ve,children:[(0,K.jsx)(V.A,{sx:{bgcolor:os.palette.error.light,color:os.palette.error.contrastText,fontWeight:"medium"},children:"Confirm Delete"}),(0,K.jsxs)($.A,{sx:{py:3},children:[(0,K.jsx)(c.A,{variant:"body1",gutterBottom:!0,children:"Are you sure you want to delete this transaction?"}),He&&(0,K.jsx)(d.A,{elevation:0,sx:{p:2,mt:2,bgcolor:"dark"===os.palette.mode?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",borderRadius:2},children:(0,K.jsxs)(p.Ay,{container:!0,spacing:1,children:[(0,K.jsx)(p.Ay,{item:!0,xs:4,children:(0,K.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Description:"})}),(0,K.jsx)(p.Ay,{item:!0,xs:8,children:(0,K.jsx)(c.A,{variant:"body2",children:He.description})}),(0,K.jsx)(p.Ay,{item:!0,xs:4,children:(0,K.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Amount:"})}),(0,K.jsx)(p.Ay,{item:!0,xs:8,children:(0,K.jsx)(c.A,{variant:"body2",sx:{fontWeight:"bold",color:"expense"===He.type?"error.main":"income"===He.type?"success.main":"inherit"},children:ys(He.amount)})}),(0,K.jsx)(p.Ay,{item:!0,xs:4,children:(0,K.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Date:"})}),(0,K.jsx)(p.Ay,{item:!0,xs:8,children:(0,K.jsx)(c.A,{variant:"body2",children:gs(He.date)})}),(0,K.jsx)(p.Ay,{item:!0,xs:4,children:(0,K.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Type:"})}),(0,K.jsx)(p.Ay,{item:!0,xs:8,children:(0,K.jsx)(j.A,{label:He.type,size:"small",color:fs(He.type),sx:{borderRadius:8}})})]})})]}),(0,K.jsxs)(_.A,{sx:{px:3,pb:3},children:[(0,K.jsx)(h.A,{onClick:us,startIcon:(0,K.jsx)(te.A,{}),sx:{borderRadius:8},children:"Cancel"}),(0,K.jsx)(h.A,{onClick:async()=>{try{await pe.A.delete(`/api/v1/transactions/${He._id}`),s((e=>e.filter((e=>e._id!==He._id)))),Le(!1),Fe(null)}catch(e){console.error("Error deleting transaction:",e)}},color:"error",variant:"contained",startIcon:(0,K.jsx)(de.A,{}),sx:{borderRadius:8},children:"Delete"})]})]})]})});var Ss}},79641:(e,s,t)=>{t.d(s,{A:()=>a});var n=t(66734),r=t(70579);const a=(0,n.A)((0,r.jsx)("path",{d:"M4 10h3v7H4zm6.5 0h3v7h-3zM2 19h20v3H2zm15-9h3v7h-3zm-5-9L2 6v2h20V6z"}),"AccountBalance")},88645:(e,s,t)=>{t.d(s,{A:()=>a});var n=t(66734),r=t(70579);const a=(0,n.A)((0,r.jsx)("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward")}}]);
//# sourceMappingURL=404.c72571e5.chunk.js.map