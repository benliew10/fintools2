"use strict";(self.webpackChunkfintools_client=self.webpackChunkfintools_client||[]).push([[972],{14972:(e,r,t)=>{t.r(r),t.d(r,{default:()=>ie});var s=t(65043),n=t(24836),a=t(30344),o=t(96446),i=t(81637),l=t(85865),d=t(19252),c=t(14194),x=t(11906),u=t(68903),h=t(63336),p=t(81045),g=t(43845),b=t(12110),m=t(26494),A=t(39336),j=t(88911),y=t(67784),v=t(51787),f=t(53193),C=t(79190),w=t(69285),k=t(32143),R=t(24010),S=t(77739),I=t(17392),$=t(83462),D=t(4219),W=t(35316),z=t(29347),F=t(28460),P=t(68754),M=t(48132),N=t(79641),T=t(35232),E=t(50357),L=t(47805),q=t(70141),Y=t(67957),_=t(51214),B=t(79484),O=t(88645),H=t(59540),G=t(59383),V=t(3632),J=t(83560),K=t(51387),Q=t(33438),U=t(37141),X=t(26240),Z=t(28393),ee=t(58390),re=t(43278),te=t(39993),se=t(64668),ne=t(70579);const ae=s.forwardRef((function(e,r){return(0,ne.jsx)(n.A,{direction:"up",ref:r,...e})})),oe=["Sales","Service","Investment","Interest","Refund","Other"],ie=()=>{const{revenues:e,loadRevenues:r,revenuesLoading:t,revenuesLoaded:n,refreshData:ie,addRevenue:le,deleteRevenue:de,updateRevenue:ce,loading:xe,error:ue}=(0,s.useContext)(se.r),[he,pe]=(0,s.useState)(""),[ge,be]=(0,s.useState)(""),[me,Ae]=(0,s.useState)(!1),[je,ye]=(0,s.useState)({description:"",amount:"",category:"",date:new Date,client:"",notes:""}),[ve,fe]=(0,s.useState)(null),[Ce,we]=(0,s.useState)(!1),[ke,Re]=(0,s.useState)(!1),[Se,Ie]=(0,s.useState)(null),[$e,De]=(0,s.useState)("desc"),[We,ze]=(0,s.useState)(!1),[Fe,Pe]=(0,s.useState)(null),[Me,Ne]=(0,s.useState)(!1),[Te,Ee]=(0,s.useState)(!1),Le=(0,X.A)(),qe=(0,a.A)(Le.breakpoints.down("sm"));(0,s.useEffect)((()=>{let e=!0,s=!1;return(async()=>{if(s)console.log("Already fetching revenues data, skipping request");else if(!n||t)try{s=!0,console.log("Revenues component - fetching revenues data"),await r(!1),e&&console.log("Revenues data successfully loaded")}catch(a){console.error("Failed to load revenues:",a),e&&Ie("Failed to load revenues. Please try the refresh button.")}finally{s=!1}else console.log("Revenues data already loaded, skipping request")})(),()=>{e=!1}}),[r,n,t]);const Ye=e.filter((e=>{const r=e.description.toLowerCase().includes(he.toLowerCase())||e.source.toLowerCase().includes(he.toLowerCase()),t=!ge||e.category===ge;return r&&t})).sort(((e,r)=>{const t=new Date(e.date),s=new Date(r.date);return"desc"===$e?s-t:t-s})),_e=Ye.reduce(((e,r)=>e+r.amount),0),Be=oe.map((e=>{const r=Ye.filter((r=>r.category===e)).reduce(((e,r)=>e+r.amount),0);return{category:e,amount:r}})).sort(((e,r)=>r.amount-e.amount)),Oe=e=>{switch(e){case"Sales":return(0,ne.jsx)(F.A,{});case"Service":return(0,ne.jsx)(P.A,{});case"Investment":return(0,ne.jsx)(M.A,{});case"Interest":return(0,ne.jsx)(N.A,{});case"Refund":return(0,ne.jsx)(T.A,{});default:return(0,ne.jsx)(E.A,{})}},He=e=>{switch(e){case"Sales":return"success";case"Service":return"primary";case"Investment":return"secondary";case"Interest":return"warning";case"Refund":return"error";default:return"default"}},Ge=e=>{try{return(0,te.A)(new Date(e),"dd MMM yyyy")}catch(Se){return"Invalid date"}},Ve=e=>new Intl.NumberFormat("en-MY",{style:"currency",currency:"MYR",minimumFractionDigits:2}).format(e||0),Je=()=>{ye({description:"",amount:"",category:"",date:new Date,client:"",notes:""}),we(!1),fe(null)},Ke=()=>{Je(),Ae(!0)},Qe=()=>{Ae(!1),Je()},Ue=e=>{ye({...je,[e.target.name]:e.target.value})},Xe=e=>{ye({date:new Date(e.date),amount:e.amount.toString(),description:e.description,category:e.category,source:e.source}),we(!0),fe(e),Ae(!0)},Ze=e=>{Pe(e),Ne(!0)},er=()=>{De("desc"===$e?"asc":"desc")};return t?(0,ne.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"80vh"},children:[(0,ne.jsx)(i.A,{size:60,thickness:4,sx:{mb:2}}),(0,ne.jsx)(l.A,{variant:"h6",color:"text.secondary",children:"Loading Revenues Data..."})]}):Se?(0,ne.jsx)(d.A,{sx:{py:4},children:(0,ne.jsx)(c.A,{severity:"error",variant:"filled",action:(0,ne.jsx)(x.A,{color:"inherit",size:"small",onClick:()=>r(),startIcon:(0,ne.jsx)(L.A,{}),children:"Retry"}),sx:{borderRadius:4,boxShadow:"0 4px 12px rgba(211, 47, 47, 0.2)"},children:Se})}):(0,ne.jsx)(ee.$,{dateAdapter:Z.h,children:(0,ne.jsxs)(d.A,{disableGutters:qe,sx:{pb:qe?7:3},children:[(0,ne.jsxs)(o.A,{sx:{pt:qe?2:3,pb:2,px:qe?2:3,background:"dark"===Le.palette.mode?`linear-gradient(135deg, ${Le.palette.success.dark}, ${Le.palette.primary.dark})`:`linear-gradient(135deg, ${Le.palette.success.main}, ${Le.palette.primary.main})`,borderRadius:qe?"0 0 24px 24px":"0 0 16px 16px",mb:3,color:"white",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[(0,ne.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:qe?1:2},children:[(0,ne.jsx)(l.A,{variant:qe?"h5":"h4",sx:{fontWeight:600},children:"Revenues"}),!qe&&(0,ne.jsx)(x.A,{variant:"contained",startIcon:(0,ne.jsx)(q.A,{}),onClick:()=>Ke(),sx:{borderRadius:8,px:3,py:1,bgcolor:"white",color:Le.palette.success.main,"&:hover":{bgcolor:"rgba(255,255,255,0.9)"},boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},children:"Add Revenue"})]}),!qe&&(0,ne.jsxs)(u.Ay,{container:!0,spacing:2,sx:{mt:1},children:[(0,ne.jsx)(u.Ay,{item:!0,xs:12,md:4,children:(0,ne.jsxs)(h.A,{elevation:2,sx:{p:2,borderRadius:4,bgcolor:"rgba(255,255,255,0.9)",display:"flex",alignItems:"center",backdropFilter:"blur(10px)",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},children:[(0,ne.jsx)(p.A,{sx:{bgcolor:Le.palette.success.main,mr:2},children:(0,ne.jsx)(Y.A,{})}),(0,ne.jsxs)(o.A,{children:[(0,ne.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Total Revenue"}),(0,ne.jsx)(l.A,{variant:"h6",color:"success.main",sx:{fontWeight:"bold"},children:Ve(_e)})]})]})}),(0,ne.jsx)(u.Ay,{item:!0,xs:12,md:4,children:(0,ne.jsxs)(h.A,{elevation:2,sx:{p:2,borderRadius:4,bgcolor:"rgba(255,255,255,0.9)",display:"flex",alignItems:"center",backdropFilter:"blur(10px)",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},children:[(0,ne.jsx)(p.A,{sx:{bgcolor:Le.palette.primary.main,mr:2},children:(0,ne.jsx)(_.A,{})}),(0,ne.jsxs)(o.A,{children:[(0,ne.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"This Month"}),(0,ne.jsx)(l.A,{variant:"h6",sx:{fontWeight:"bold"},children:Ve(e.filter((e=>new Date(e.date).getMonth()===(new Date).getMonth())).reduce(((e,r)=>e+r.amount),0))})]})]})}),(0,ne.jsx)(u.Ay,{item:!0,xs:12,md:4,children:(0,ne.jsxs)(h.A,{elevation:2,sx:{p:2,borderRadius:4,bgcolor:"rgba(255,255,255,0.9)",display:"flex",flexDirection:"column",alignItems:"flex-start",backdropFilter:"blur(10px)",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},children:[(0,ne.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Top Category"}),Be.length>0&&Be[0].amount>0?(0,ne.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[(0,ne.jsx)(g.A,{icon:Oe(Be[0].category),label:Be[0].category,color:He(Be[0].category),sx:{mr:1}}),(0,ne.jsx)(l.A,{variant:"body1",sx:{fontWeight:"bold",ml:"auto"},children:Ve(Be[0].amount)})]}):(0,ne.jsx)(l.A,{variant:"body1",children:"No revenues yet"})]})})]})]}),qe&&(0,ne.jsx)(o.A,{sx:{px:2,mb:3},children:(0,ne.jsx)(b.A,{elevation:2,sx:{borderRadius:4,overflow:"hidden",boxShadow:"0 2px 10px rgba(0,0,0,0.08)"},children:(0,ne.jsxs)(m.A,{sx:{p:2},children:[(0,ne.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,ne.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Total Revenue"}),(0,ne.jsx)(g.A,{label:`${e.length} items`,size:"small",sx:{height:24,"& .MuiChip-label":{px:1,py:0},fontWeight:500,bgcolor:"rgba(0,0,0,0.05)"}})]}),(0,ne.jsx)(l.A,{variant:"h4",sx:{fontWeight:700,color:"success.main",my:1},children:Ve(_e)}),(0,ne.jsx)(A.A,{sx:{my:1.5}}),Be.filter((e=>e.amount>0)).length>0?(0,ne.jsx)(j.A,{spacing:1,children:Be.filter((e=>e.amount>0)).slice(0,2).map((e=>{let{category:r,amount:t}=e;return(0,ne.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,ne.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,ne.jsx)(o.A,{sx:{borderRadius:"8px",p:.5,mr:1,bgcolor:`${He(r)}.light`,color:`${He(r)}.main`,display:"flex"},children:Oe(r)}),(0,ne.jsx)(l.A,{variant:"body2",children:r})]}),(0,ne.jsx)(l.A,{variant:"body2",sx:{fontWeight:600},children:Ve(t)})]},r)}))}):(0,ne.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:1},children:"No revenues recorded yet"})]})})}),(0,ne.jsx)(o.A,{sx:{mb:3,px:qe?2:0},children:(0,ne.jsxs)(u.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,ne.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,ne.jsx)(y.A,{fullWidth:!0,placeholder:"Search revenues",variant:"outlined",value:he,onChange:e=>pe(e.target.value),InputProps:{startAdornment:(0,ne.jsx)(v.A,{position:"start",children:(0,ne.jsx)(B.A,{})}),sx:{borderRadius:8,backgroundColor:"white","& fieldset":{borderColor:"rgba(0, 0, 0, 0.08)"},boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"}}})}),!qe&&(0,ne.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,ne.jsxs)(f.A,{fullWidth:!0,variant:"outlined",children:[(0,ne.jsx)(C.A,{children:"Filter by Category"}),(0,ne.jsxs)(w.A,{value:ge,onChange:e=>be(e.target.value),label:"Filter by Category",sx:{borderRadius:8,backgroundColor:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"},startAdornment:ge?(0,ne.jsx)(v.A,{position:"start",sx:{ml:1},children:Oe(ge)}):null,children:[(0,ne.jsx)(k.A,{value:"",children:"All Categories"}),oe.map((e=>(0,ne.jsx)(k.A,{value:e,children:(0,ne.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,ne.jsx)(o.A,{sx:{mr:1.5,color:`${He(e)}.main`,display:"flex"},children:Oe(e)}),e]})},e)))]})]})}),(0,ne.jsxs)(u.Ay,{item:!0,xs:12,sm:12,md:4,sx:{display:"flex",justifyContent:{xs:"space-between",md:"flex-end"},gap:1},children:[!qe&&(0,ne.jsx)(x.A,{variant:"outlined",color:"primary",onClick:er,startIcon:"desc"===$e?(0,ne.jsx)(O.A,{}):(0,ne.jsx)(H.A,{}),sx:{borderRadius:8,py:1.2,px:2,borderWidth:1,mr:1},children:"desc"===$e?"Newest":"Oldest"}),(0,ne.jsx)(x.A,{variant:"contained",color:"primary",startIcon:(0,ne.jsx)(q.A,{}),onClick:Ke,fullWidth:qe,size:qe?"large":"medium",sx:{borderRadius:8,py:qe?1.5:1.2,boxShadow:"0 4px 10px rgba(0, 122, 255, 0.3)"},children:"Add Revenue"})]})]})}),qe&&(0,ne.jsxs)(o.A,{sx:{px:2,mb:2,overflow:"auto"},children:[(0,ne.jsxs)(o.A,{sx:{display:"flex",gap:1,pb:.5},children:[(0,ne.jsx)(g.A,{label:"All",color:""===ge?"primary":"default",onClick:()=>be(""),sx:{borderRadius:8}}),oe.map((e=>(0,ne.jsx)(g.A,{label:e,icon:Oe(e),color:ge===e?He(e):"default",variant:ge===e?"filled":"outlined",onClick:()=>be(ge===e?"":e),sx:{borderRadius:8}},e)))]}),(0,ne.jsx)(o.A,{sx:{display:"flex",alignItems:"center",mt:2},children:(0,ne.jsx)(x.A,{variant:"outlined",color:"primary",onClick:er,startIcon:"desc"===$e?(0,ne.jsx)(O.A,{}):(0,ne.jsx)(H.A,{}),size:"small",sx:{borderRadius:8,mr:"auto"},children:"desc"===$e?"Newest First":"Oldest First"})})]}),qe&&(0,ne.jsx)(o.A,{sx:{position:"fixed",bottom:85,right:16,zIndex:10},children:(0,ne.jsx)(R.A,{color:"primary","aria-label":"filter",onClick:()=>Ee(!0),sx:{boxShadow:"0 4px 12px rgba(0, 122, 255, 0.5)"},children:(0,ne.jsx)(G.A,{})})}),!qe&&Ye.length>0&&(0,ne.jsx)(o.A,{sx:{mb:3},children:(0,ne.jsx)(u.Ay,{container:!0,spacing:3,children:Ye.map((e=>(0,ne.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,ne.jsxs)(b.A,{elevation:1,sx:{borderRadius:4,overflow:"hidden",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{boxShadow:"0 8px 16px rgba(0,0,0,0.1)",transform:"translateY(-2px)"}},children:[(0,ne.jsx)(o.A,{sx:{height:6,width:"100%",bgcolor:`${He(e.category)}.main`}}),(0,ne.jsxs)(m.A,{sx:{p:3},children:[(0,ne.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,ne.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,ne.jsx)(p.A,{sx:{bgcolor:`${He(e.category)}.main`,width:36,height:36,mr:1.5},children:Oe(e.category)}),(0,ne.jsxs)(o.A,{children:[(0,ne.jsx)(g.A,{label:e.category,size:"small",color:He(e.category),sx:{height:20,"& .MuiChip-label":{px:1,fontSize:"0.7rem",fontWeight:600}}}),(0,ne.jsx)(l.A,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:Ge(e.date)})]})]}),(0,ne.jsx)(l.A,{variant:"h6",sx:{fontWeight:700,color:"success.main",ml:1},children:Ve(e.amount)})]}),(0,ne.jsxs)(o.A,{sx:{mb:2},children:[(0,ne.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:600,mb:.5},children:e.description}),e.source&&(0,ne.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:["Source: ",e.source]})]}),(0,ne.jsxs)(o.A,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:[(0,ne.jsx)(S.A,{title:"View",children:(0,ne.jsx)(I.A,{size:"small",onClick:r=>{r.stopPropagation(),(e=>{Pe(e),ze(!0)})(e)},sx:{backgroundColor:"rgba(0,0,0,0.04)","&:hover":{backgroundColor:"rgba(0,0,0,0.08)"},mr:1},children:(0,ne.jsx)(V.A,{fontSize:"small"})})}),(0,ne.jsx)(S.A,{title:"Edit",children:(0,ne.jsx)(I.A,{size:"small",onClick:r=>{r.stopPropagation(),Xe(e)},sx:{backgroundColor:"rgba(0,0,0,0.04)","&:hover":{backgroundColor:"rgba(0,0,0,0.08)"},mr:1},children:(0,ne.jsx)(J.A,{fontSize:"small"})})}),(0,ne.jsx)(S.A,{title:"Delete",children:(0,ne.jsx)(I.A,{size:"small",onClick:r=>{r.stopPropagation(),Ze(e)},sx:{color:"error.main",backgroundColor:"rgba(211,47,47,0.04)","&:hover":{backgroundColor:"rgba(211,47,47,0.08)"}},children:(0,ne.jsx)(K.A,{fontSize:"small"})})})]})]})]})},e._id)))})}),0===Ye.length&&(0,ne.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",p:4,my:4,textAlign:"center"},children:[(0,ne.jsx)(p.A,{sx:{width:80,height:80,mb:2,bgcolor:"primary.light",color:"primary.main"},children:(0,ne.jsx)(Y.A,{sx:{fontSize:40}})}),(0,ne.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"No revenues found"}),(0,ne.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{mb:2,maxWidth:300},children:he||ge?"Try adjusting your search or filters":"You haven't added any revenues yet. Start by adding your first revenue."}),(0,ne.jsx)(x.A,{variant:"contained",color:"primary",startIcon:(0,ne.jsx)(q.A,{}),onClick:Ke,sx:{borderRadius:8,px:3},children:"Add Revenue"})]}),(0,ne.jsxs)($.A,{open:me,onClose:Qe,fullScreen:qe,TransitionComponent:ae,PaperProps:{sx:{borderRadius:qe?0:4,overflow:"hidden",backgroundImage:"dark"===Le.palette.mode?`linear-gradient(to bottom, ${Le.palette.background.paper}, ${Le.palette.background.paper})`:"linear-gradient(to bottom, rgba(255,255,255,0.95), rgba(255,255,255,1))",boxShadow:"0 0 20px rgba(0,0,0,0.1)",width:qe?"100%":"550px",maxHeight:qe?"100%":"85vh"}},children:[(0,ne.jsxs)(o.A,{sx:{px:3,pt:2,pb:1,bgcolor:"dark"===Le.palette.mode?`linear-gradient(135deg, ${Le.palette.success.dark}, ${Le.palette.primary.dark})`:`linear-gradient(135deg, ${Le.palette.success.main}, ${Le.palette.primary.main})`,color:"white",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,ne.jsx)(D.A,{sx:{p:0,fontSize:"1.2rem",fontWeight:600},children:Ce?"Edit Revenue":"Add New Revenue"}),(0,ne.jsx)(I.A,{edge:"end",color:"inherit",onClick:Qe,"aria-label":"close",children:(0,ne.jsx)(Q.A,{})})]}),(0,ne.jsx)(W.A,{sx:{px:3,pt:3,pb:1,overflowY:"auto"},children:(0,ne.jsxs)(u.Ay,{container:!0,spacing:2,children:[(0,ne.jsx)(u.Ay,{item:!0,xs:12,children:(0,ne.jsx)(y.A,{name:"description",label:"Description",value:je.description,onChange:Ue,fullWidth:!0,variant:"outlined",required:!0,autoFocus:!0,InputProps:{sx:{borderRadius:2,backgroundColor:"rgba(0,0,0,0.02)"}}})}),(0,ne.jsx)(u.Ay,{item:!0,xs:12,sm:6,children:(0,ne.jsx)(y.A,{name:"amount",label:"Amount (MYR)",value:je.amount,onChange:Ue,fullWidth:!0,variant:"outlined",required:!0,type:"number",InputProps:{startAdornment:(0,ne.jsx)(v.A,{position:"start",children:"RM"}),sx:{borderRadius:2,backgroundColor:"rgba(0,0,0,0.02)"}}})}),(0,ne.jsx)(u.Ay,{item:!0,xs:12,sm:6,children:(0,ne.jsxs)(f.A,{fullWidth:!0,variant:"outlined",required:!0,children:[(0,ne.jsx)(C.A,{children:"Category"}),(0,ne.jsx)(w.A,{name:"category",label:"Category",value:je.category,onChange:Ue,sx:{borderRadius:2,backgroundColor:"rgba(0,0,0,0.02)"},children:oe.map((e=>(0,ne.jsx)(k.A,{value:e,children:(0,ne.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,ne.jsx)(o.A,{sx:{mr:1.5,color:`${He(e)}.main`,display:"flex"},children:Oe(e)}),e]})},e)))})]})}),(0,ne.jsx)(u.Ay,{item:!0,xs:12,children:(0,ne.jsx)(re.l,{label:"Date",value:je.date,onChange:e=>{ye({...je,date:e})},slotProps:{textField:{fullWidth:!0,variant:"outlined",sx:{"& .MuiInputBase-root":{borderRadius:2,backgroundColor:"rgba(0,0,0,0.02)"}}}}})}),(0,ne.jsx)(u.Ay,{item:!0,xs:12,children:(0,ne.jsx)(y.A,{name:"source",label:"Source (Optional)",value:je.source,onChange:Ue,fullWidth:!0,variant:"outlined",InputProps:{sx:{borderRadius:2,backgroundColor:"rgba(0,0,0,0.02)"}}})})]})}),(0,ne.jsxs)(z.A,{sx:{px:3,py:2,justifyContent:"flex-end"},children:[(0,ne.jsx)(x.A,{onClick:Qe,sx:{borderRadius:8,px:3,color:"text.secondary","&:hover":{backgroundColor:"rgba(0,0,0,0.05)"}},children:"Cancel"}),(0,ne.jsx)(x.A,{onClick:async()=>{if(je.amount&&je.description&&je.date)try{Ce?await ce(ve._id,{...je,amount:parseFloat(je.amount)}):await le({...je,amount:parseFloat(je.amount)}),Qe()}catch(Se){console.error("Error saving revenue:",Se),alert("Error saving revenue. Please try again.")}else alert("Please fill in all required fields")},variant:"contained",color:"primary",startIcon:(0,ne.jsx)(U.A,{}),sx:{borderRadius:8,px:3,boxShadow:"0 4px 10px rgba(0, 122, 255, 0.3)"},children:Ce?"Save Changes":"Add Revenue"})]})]}),(0,ne.jsx)($.A,{open:We,onClose:()=>ze(!1),fullScreen:qe,TransitionComponent:ae,PaperProps:{sx:{borderRadius:qe?0:4,overflow:"hidden",width:qe?"100%":"500px",backgroundImage:"dark"===Le.palette.mode?`linear-gradient(to bottom, ${Le.palette.background.paper}, ${Le.palette.background.paper})`:"linear-gradient(to bottom, rgba(255,255,255,0.95), rgba(255,255,255,1))",boxShadow:"0 0 20px rgba(0,0,0,0.1)"}},children:Fe&&(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsxs)(o.A,{sx:{px:3,pt:2,pb:1,bgcolor:"dark"===Le.palette.mode?`linear-gradient(135deg, ${Le.palette.success.dark}, ${Le.palette.primary.dark})`:`linear-gradient(135deg, ${Le.palette.success.main}, ${Le.palette.primary.main})`,color:"white",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,ne.jsx)(D.A,{sx:{p:0,fontSize:"1.2rem",fontWeight:600},children:"Revenue Details"}),(0,ne.jsx)(I.A,{edge:"end",color:"inherit",onClick:()=>ze(!1),"aria-label":"close",children:(0,ne.jsx)(Q.A,{})})]}),(0,ne.jsxs)(W.A,{sx:{px:3,pt:3,pb:0},children:[(0,ne.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,ne.jsx)(p.A,{sx:{bgcolor:`${He(Fe.category)}.main`,width:56,height:56,mr:2},children:Oe(Fe.category)}),(0,ne.jsxs)(o.A,{children:[(0,ne.jsx)(l.A,{variant:"h6",sx:{fontWeight:600,lineHeight:1.2},children:Fe.description}),(0,ne.jsx)(g.A,{label:Fe.category,color:He(Fe.category),size:"small",sx:{mt:.5}})]})]}),(0,ne.jsxs)(h.A,{elevation:0,sx:{p:2,mb:3,borderRadius:3,backgroundColor:"rgba(0,0,0,0.03)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,ne.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Amount"}),(0,ne.jsx)(l.A,{variant:"h5",color:"success.main",sx:{fontWeight:700},children:Ve(Fe.amount)})]}),(0,ne.jsx)(u.Ay,{container:!0,spacing:2,sx:{mb:2},children:(0,ne.jsx)(u.Ay,{item:!0,xs:12,children:(0,ne.jsxs)(h.A,{elevation:0,sx:{p:2,borderRadius:3,backgroundColor:"rgba(0,0,0,0.03)",height:"100%"},children:[(0,ne.jsx)(l.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Date"}),(0,ne.jsx)(l.A,{variant:"body1",sx:{fontWeight:500},children:Ge(Fe.date)})]})})}),Fe.source&&(0,ne.jsxs)(o.A,{sx:{mb:3},children:[(0,ne.jsx)(l.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Source"}),(0,ne.jsx)(l.A,{variant:"body1",children:Fe.source})]})]}),(0,ne.jsxs)(z.A,{sx:{px:3,py:2,justifyContent:"space-between"},children:[(0,ne.jsx)(x.A,{color:"error",startIcon:(0,ne.jsx)(K.A,{}),onClick:()=>{Ze(Fe),ze(!1)},sx:{borderRadius:8},children:"Delete"}),(0,ne.jsx)(x.A,{variant:"contained",color:"primary",startIcon:(0,ne.jsx)(J.A,{}),onClick:()=>{Xe(Fe),ze(!1)},sx:{borderRadius:8},children:"Edit"})]})]})}),(0,ne.jsx)($.A,{open:Me,onClose:()=>{xe||ke||(Ne(!1),Ie(null))},TransitionComponent:ae,PaperProps:{sx:{borderRadius:4,overflow:"hidden",maxWidth:"400px"}},children:Fe&&(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(D.A,{sx:{pt:3,px:3},children:(0,ne.jsx)(l.A,{variant:"h6",sx:{fontWeight:600},children:"Delete Revenue"})}),(0,ne.jsxs)(W.A,{sx:{px:3,pt:1},children:[Se&&(0,ne.jsx)(c.A,{severity:"error",sx:{mb:2,borderRadius:2},action:(0,ne.jsx)(x.A,{color:"inherit",size:"small",onClick:()=>Ie(null),children:"Dismiss"}),children:Se}),(0,ne.jsx)(l.A,{variant:"body1",sx:{mb:2},children:"Are you sure you want to delete this revenue?"}),(0,ne.jsxs)(h.A,{elevation:0,sx:{p:2,borderRadius:3,backgroundColor:"rgba(0,0,0,0.03)",display:"flex",alignItems:"center"},children:[(0,ne.jsx)(p.A,{sx:{bgcolor:`${He(Fe.category)}.main`,width:40,height:40,mr:2},children:Oe(Fe.category)}),(0,ne.jsxs)(o.A,{sx:{flex:1},children:[(0,ne.jsx)(l.A,{variant:"subtitle2",sx:{fontWeight:500,lineHeight:1.2},children:Fe.description}),(0,ne.jsxs)(l.A,{variant:"caption",color:"text.secondary",children:[Ve(Fe.amount)," \u2022 ",Ge(Fe.date)]})]})]})]}),(0,ne.jsxs)(z.A,{sx:{px:3,py:2},children:[(0,ne.jsx)(x.A,{onClick:()=>{Ne(!1),Ie(null)},disabled:xe||ke,sx:{borderRadius:8,px:3,color:"text.secondary"},children:"Cancel"}),(0,ne.jsx)(x.A,{onClick:async()=>{try{Re(!0),Ie(null),console.log(`Attempting to delete revenue with ID: ${Fe._id}`);const e=await de(Fe._id);console.log(`Delete revenue result: ${e}`),e?(console.log("Revenue deleted successfully, closing dialog"),Ne(!1)):(console.error(`Delete revenue failed: ${ue||"No specific error provided"}`),Ie(ue||"Failed to delete revenue. Please try again later."))}catch(e){console.error("Error in handleDeleteConfirm:",e),Ie(`Failed to delete revenue: ${e.message||"An unexpected error occurred"}`)}finally{Re(!1)}},variant:"contained",color:"error",disabled:xe||ke,startIcon:xe||ke?(0,ne.jsx)(i.A,{size:16,color:"inherit"}):null,sx:{borderRadius:8,px:3},children:xe||ke?"Deleting...":"Delete"})]})]})}),qe&&(0,ne.jsx)(o.A,{sx:{position:"fixed",bottom:16,right:16,zIndex:10},children:(0,ne.jsx)(R.A,{color:"primary","aria-label":"add revenue",onClick:Ke,sx:{boxShadow:"0 4px 12px rgba(0, 122, 255, 0.5)","&:hover":{bgcolor:"primary.dark"}},children:(0,ne.jsx)(q.A,{})})})]})})}}}]);
//# sourceMappingURL=972.70e48e93.chunk.js.map